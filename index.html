<!DOCTYPE html>
<html lang="ja">
<head>
<!-- Noto Sans JP -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>ğŸ– ç‹‚ä»‹ã‚¯ãƒªãƒƒã‚«ãƒ¼</title>





<!-- WARNING: unauthorized access detected -->
<!-- Q: ã€Œâ€¦â€¦ã‚ã‚Œï½ï¼Ÿ ã‚­ãƒŸã€ãªã‚“ã‹è§¦ã£ã¡ã‚ƒã„ã‘ãªã„ã¨ã“ã‚ã¾ã§æ¥ã¦ãªã„ï¼Ÿã€ -->
<!-- ãƒ«ãƒ¼ã‚¤: ã€Œâ€¦â€¦ãƒãƒ¼ãƒˆã¨ã‹ãƒ€ã‚»ã‚§ã“ã¨ã¯ã™ã‚“ãªã‚ˆã€ -->
<!-- TRACE: dismissed -->


















    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
:root {
    /* ===== ãƒ™ãƒ¼ã‚¹ï¼ˆèƒŒæ™¯ï¼‰ ===== */
    --base-color: #5C5758;
    --base-light: #6A6566;
    --base-dark: #4A4546;
    /* ===== ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼===== */
    --main-color: #A91D3A;
    --main-color-light: #C73659;

    /* ===== ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ ===== */
    --accent-color: #EEEEEE;

    /* ===== ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
    --primary-gradient: linear-gradient(135deg, #C73659 0%, #A91D3A 100%);
    --secondary-gradient: linear-gradient(135deg, #A91D3A 0%, #C73659 100%);

    /* ===== ã‚«ãƒ¼ãƒ‰èƒŒæ™¯ ===== */
    --card-bg: rgba(255, 255, 255, 0.08);

    /* ===== ç½«ç·š ===== */
    --border-color: rgba(238, 238, 238, 0.25);

    /* ===== ãƒ†ã‚­ã‚¹ãƒˆ ===== */
    --text-color: #FFFFFF;   
    --text-dark: #F1F1F1;    
    --text-light: #D0D0D0;   
    --text-muted: #AAAAAA;
    --text-glow: 0 0 10px rgba(199, 54, 89, 0.35);

    /* ===== ãƒœã‚¿ãƒ³ ===== */
    --button-gradient: linear-gradient(135deg, #C73659 0%, #A91D3A 100%);
    --button-hover: linear-gradient(135deg, #D64F73 0%, #B32443 100%);
}


body {
    font-family: 'BIZ UDPGothic', 'Noto Sans JP', sans-serif;

    background: linear-gradient(
        135deg,
        #4A4546 0%,
        #5C5758 40%,
        #6A6566 100%
    );
    background-attachment: fixed;

    color: var(--text-color);
    overflow-x: hidden;
    min-height: 100vh;
      position: relative;
}        /* èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    
    background:
        radial-gradient(circle at 20% 50%, rgba(199, 54, 89, 0.12) 0%, transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(169, 29, 58, 0.10) 0%, transparent 55%),
        radial-gradient(circle at 40% 20%, rgba(230, 160, 175, 0.08) 0%, transparent 55%);

    animation: bgPulse 10s ease-in-out infinite;
    pointer-events: none;
      z-index: 0;
}

@keyframes bgPulse {
    0%, 100% { opacity: 0.55; }
    50% { opacity: 0.95; }
}


/* =========================
   ãƒ˜ãƒƒãƒ€ãƒ¼
   ========================= */
header {

    background: linear-gradient(
        135deg,
        rgba(92, 87, 88, 0.80) 0%,
        rgba(74, 69, 70, 0.78) 40%,
        rgba(90, 20, 40, 0.75) 100%
    );
    backdrop-filter: blur(16px);

    padding: 1rem 2rem;

    display: flex;
    justify-content: space-between;
    align-items: center;


    border-bottom: 3px solid var(--main-color);


    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.45),
        0 0 20px rgba(199, 54, 89, 0.20);

    position: sticky;
    top: 0;
    z-index: 100;
}

/* =========================
   ã‚¿ã‚¤ãƒˆãƒ«
   ========================= */
.header-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

header h1 {
    font-size: 2rem;
    font-weight: 900;
    margin: 0;
    color: #FFFFFF;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.25);
    letter-spacing: 2px;
}
.subtitle {
    font-size: 0.9rem;
    opacity: 0.95;
    margin-top: 0.3rem;
    color: #FFFFFF;
    white-space: nowrap;
}

.header-buttons {
    display: flex;
    gap: 0.6rem;
    white-space: nowrap;
}

.header-btn {
    background: #4A4546; 
    border: 1px solid rgba(255, 255, 255, 0.25);
    color: #FFFFFF;

    padding: 0.45rem 1rem;
    border-radius: 8px;
    font-weight: 600;

    box-shadow:
        0 1px 4px rgba(0,0,0,0.4),
        0 0 8px rgba(199, 54, 89, 0.25); /* æ·±èµ¤ã®ç¥ç¥­ã‚°ãƒ­ãƒ¼ */
}


.header-btn:hover {
    background: rgba(199, 54, 89, 0.35);
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.25);
    transform: none;
}
        /* =========================
   ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
   ========================= */
.container {
    max-width: 1400px;
    margin: 2rem auto;
    padding: 0 1rem;
    display: grid;
    grid-template-columns: 1.5fr 2.5fr 1.6fr;
    gap: 2rem;
align-items: stretch;
}

/* =========================
   ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ‘ãƒãƒ«
   ========================= */
.status-panel {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
border: 1px solid rgba(245, 208, 126, 0.25);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.25),
        0 0 20px rgba(199, 54, 89, 0.18);
    
    transition: all 0.3s ease;
    margin-bottom: 1rem;
}

#meatImage {
    width: 100%;
    height: auto;
    pointer-events: none;
}



/* ãƒ¡ã‚¤ãƒ³ã®è‚‰ã‚«ã‚¦ãƒ³ãƒˆ */
.meat-count {
    font-size: 3rem;
    font-weight: 900;
    text-align: center;
    margin: 1rem 0;

}

/* ç§’é–“ç”Ÿç”£é‡ */
.per-second {
    text-align: center;
    font-size: 1.1rem;
    font-weight: bold;

    padding: 0.8rem;
    margin-bottom: 1rem;

    background: rgba(199, 54, 89, 0.12);
    border-radius: 10px;
    color: #F1F1F1;
}

/* =========================
   ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é …ç›®
   ========================= */
.stat-item {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;

    border-bottom: 1px solid rgba(255,255,255,0.15);
    font-size: 0.9rem;
    color: #E8E8E8;
}

/* =========================
   ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–
   ========================= */
.pc-only {
    display: inline;
}
.sp-only {
    display: none;
}        
.upgrade-panel {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(245, 208, 126, 0.25);
    border-radius: 20px;

    padding: 2rem;

    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.25),
        0 0 20px rgba(199, 54, 89, 0.18);

    transition: all 0.3s ease;
}
.upgrade-panel h2 {
    font-size: 1.1rem;
    margin-bottom: 0.4rem;
    color: #FFFFFF;
}
.click-upgrade-info {
display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;

    margin: 0.8rem 0;      
}

.click-upgrade-icon {
    width: 50px;
    height: 50px;
    object-fit: cover;
}
.upgrade-title {
    font-weight: 800;
    font-size: 1rem;
    margin-bottom: 0.15rem;

    color: rgba(245, 208, 126, 0.95);
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.upgrade-desc {
    font-size: 0.9rem;
    opacity: 0.9;

    color: rgba(245, 208, 126, 0.95);
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
        


.toast--upgrade {
  background: rgba(120, 170, 255, 1) !important;
  border-color: rgba(120, 170, 255, 1) !important;
}


.toast--error {
  background: rgba(180, 180, 180, 1) !important;
  border-color: rgba(200, 200, 200, 1) !important;
  color: rgba(0, 0, 0, 0.9) !important;
}

/* =========================
   ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢
   ========================= */
.click-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    gap: 2rem;

    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);

border: 2px solid rgba(245, 208, 126, 0.25);
    border-radius: 20px;

    padding: 2rem;

    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.25),
        0 0 20px rgba(199, 54, 89, 0.18);
}

/* è‚‰ã‚¯ãƒªãƒƒã‚¯ãƒœã‚¿ãƒ³ */
.meat-button {
    width: 400px;
    height: 400px;
    font-size: 90%;

    background: transparent;
    border: none;

    border-radius: 50%;
    cursor: pointer;

    display: flex;
    align-items: center;
    justify-content: center;

    transition: all 0.2s ease;
}

.meat-button:hover {
    transform: scale(1.05);
}

.meat-button:active {
    transform: scale(0.95);
}

/* =========================
   ã‚¯ãƒªãƒƒã‚¯ã‚»ãƒªãƒ•
   ========================= */
.speech-bubble {
    background: rgba(255,255,255,0.08);
    border: 2px solid rgba(255,255,255,0.35);

    border-radius: 15px;
    padding: 1rem 1.5rem;
    min-height: 80px;

    display: flex;
    align-items: center;
    justify-content: center;

    text-align: center;
    font-weight: bold;
    font-size: 1.1rem;

    box-shadow: 
        0 4px 20px rgba(0,0,0,0.2),
        0 0 12px rgba(199,54,89,0.25);
    
    color: #FFFFFF;

    position: relative;
    transition: all 0.3s ease;
    z-index: 20;
}

.speech-bubble::after {
    content: "";
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);

    border-width: 10px 10px 0 10px;
    border-style: solid;
    border-color: rgba(255,255,255,0.35) transparent transparent transparent;
}

/* ãƒ¬ã‚¢æ¼”å‡º */
.speech-bubble.rare {
    border-color: #C73659; /* æ·±èµ¤ */
    box-shadow: 0 0 20px rgba(199, 54, 89, 0.5);
}

/* è¶…ãƒ¬ã‚¢æ¼”å‡º */
.speech-bubble.super-rare {
    border-color: #FFFFFF;
    box-shadow: 0 0 25px rgba(255, 255, 255, 0.5);
    animation: superRareGlow 1.2s ease-in-out infinite;
}

@keyframes superRareGlow {
    0%, 100% { box-shadow: 0 0 30px rgba(255, 255, 255, 0.5); }
    50% { box-shadow: 0 0 50px rgba(255, 255, 255, 0.9); }
}

        /* ãƒ•ã‚£ãƒ¼ãƒãƒ¼æ™‚ã®ã‚»ãƒªãƒ•æ  */
.speech-bubble.fever {
    border-color: #C73659;  /* ç¥ç¥­èµ¤ */
    background: linear-gradient(
        135deg,
        rgba(199, 54, 89, 0.18),
        rgba(255, 255, 255, 0.05)
    );
    box-shadow: 
        0 0 40px rgba(199, 54, 89, 0.8),
        0 0 20px rgba(255, 255, 255, 0.25);

    animation: feverBubblePulse 1.2s ease-in-out infinite;
}

.speech-bubble.fever::after {
    border-color: #C73659 transparent transparent transparent;
}

@keyframes feverBubblePulse {
    0%, 100% {
        box-shadow: 
            0 0 40px rgba(199, 54, 89, 0.8),
            0 0 20px rgba(255, 255, 255, 0.25);
        transform: scale(1);
    }
    50% {
        box-shadow: 
            0 0 60px rgba(199, 54, 89, 1),
            0 0 35px rgba(255, 255, 255, 0.35);
        transform: scale(1.03);
    }
    }


/* ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ä¸€è¦§ãƒ‘ãƒãƒ« */
.upgrades-panel {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);

    border: 2px solid rgba(245, 208, 126, 0.25);
    border-radius: 20px;

    padding: 2rem;
    max-height: 600px;
    overflow-y: auto;

    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.25),
        0 0 20px rgba(199, 54, 89, 0.18);
}

/* ===========================
   ã‚¯ãƒªãƒƒã‚¯ä¸èƒ½ã«ãªã‚‹å•é¡Œã®å®Œå…¨å¯¾ç­–
   =========================== */
/* =========================
   ç”»é¢å…¨ä½“ã‚’è¦†ã†ãƒ•ã‚§ãƒ¼ãƒ‰
   ========================= */
.screen-fade {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    background: rgba(21, 21, 21, 0.9);
    backdrop-filter: blur(6px);

    z-index: 5000;

    opacity: 1;
    transition: opacity 1.2s ease;

    pointer-events: none !important;
}


/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã®è¡¨ç¤ºåˆ¶å¾¡ã¨ã‚¯ãƒªãƒƒã‚¯åˆ¶å¾¡ */
.modal,
.unlock-modal {
    display: none;
    pointer-events: none !important;
    
    /* ãƒ¢ãƒ¼ãƒ€ãƒ«ã®åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    
    /* èƒŒæ™¯ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
    background: rgba(20, 20, 20, 0.75);
    backdrop-filter: blur(12px);
    
    /* é…ç½® */
    z-index: 3000;
    justify-content: center;
    align-items: center;
    
    padding: 2rem;
}

.modal.active,
.unlock-modal.active {
    display: flex;  /* .activeã§è¡¨ç¤º */
    pointer-events: auto !important;
    align-items: flex-start;
}

/* æ”¯æ´è€…ãƒ‘ãƒãƒ«ã®ã‚¯ãƒªãƒƒã‚¯ã‚’å¼·åˆ¶çš„ã«æœ‰åŠ¹åŒ– */
.upgrades-panel {
    pointer-events: auto !important;
}




/* å€‹åˆ¥ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ */
.upgrade-item {
    pointer-events: auto !important;
    cursor: pointer;
    position: relative;
    z-index: 100 !important;

    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(245, 208, 126, 0.25);
    border-radius: 12px;
    padding: 1rem;
    margin-bottom: 1rem;
    overflow: hidden;
}
.upgrade-inner {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    gap: 0.2rem;
    transition: transform 0.15s ease;
}

.upgrade-info {
    display: flex;
    justify-content: flex-start;
    gap: 0.4rem;

    font-size: 0.65rem;
    white-space: nowrap;
    color: #DDDDDD;
    opacity: 0.85;
}

.upgrade-item:not(.locked):hover {
    background: rgba(199, 54, 89, 0.15);
    border-color: #C73659;
    box-shadow: 0 0 12px rgba(199, 54, 89, 0.4);

}
.upgrade-item.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.upgrade-item.locked:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.15);
    transform: none;
}

.upgrade-item:not(.locked):active .upgrade-inner {
    filter: brightness(0.8);
}

/* ã‚¢ã‚¤ã‚³ãƒ³ / ã‚¿ã‚¤ãƒˆãƒ« */
.upgrade-header {
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-rows: auto auto;
    width: 100%;
    column-gap: 0.4rem;
    row-gap: 0.1rem;
}

.upgrade-icon {
    grid-column: 1;
    grid-row: 1 / span 2;
    
    font-size: 1.1rem !important;
    color: #FFFFFF;
    flex-shrink: 0;
}
.upgrade-name {
    grid-column: 2;
    grid-row: 1;

    font-size: 0.9rem !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    width: 100%;
    min-width: 0;
}

/* æ‰€æŒæ•°ã‚¿ã‚° */
.upgrade-count {
    grid-column: 2;
    grid-row: 2;

    background: linear-gradient(135deg, #C73659, #A91D3A);
    color: #FFFFFF;

    padding: 0.15rem 0.5rem;
    border-radius: 8px;

    font-size: 0.75rem;
    flex-shrink: 0;

    justify-self: start;
}
.news-ticker {
background: rgba(0, 0, 0, 0.35);
    backdrop-filter: blur(10px);

    border: 2px solid rgba(255,255,255,0.25);
    padding: 0.8rem;

    margin: 2rem auto;
    max-width: 1400px;
    border-radius: 10px;

    overflow: hidden;
    position: relative;

    color: #FFFFFF;
}

.news-content {
    display: inline-block;
    white-space: nowrap;
    animation: scroll 30s linear infinite;
    padding-left: 100%;
}

@keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
}


  /* ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚«ãƒ¬ãƒ¼ */
.golden-curry {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    font-size: 200px;
    cursor: pointer;
    z-index: 1000;
    filter: 
        drop-shadow(0 0 25px rgba(255, 215, 130, 0.9)) 
        drop-shadow(0 0 40px rgba(199, 54, 89, 0.35));

    animation: goldenPulse 1.3s ease-in-out infinite;
    user-select: none;
}

@keyframes goldenPulse {
    0%, 100% {
        transform: translate(-50%, -50%) scale(1);
        filter: 
            drop-shadow(0 0 25px rgba(255, 215, 130, 0.9))
            drop-shadow(0 0 35px rgba(199, 54, 89, 0.35));
    }
    50% {
        transform: translate(-50%, -50%) scale(1.2);
        filter: 
            drop-shadow(0 0 40px rgba(255, 230, 160, 1))
            drop-shadow(0 0 55px rgba(199, 54, 89, 0.6));
    }
}
.golden-meat-rain {
    position: fixed;
    font-size: 2rem;
    pointer-events: none;
    z-index: 999;
    filter: 
        drop-shadow(0 0 12px rgba(245, 208, 126, 0.9))
        drop-shadow(0 0 18px rgba(199, 54, 89, 0.4));

    animation: meatFall 2s ease-in forwards;
}

@keyframes meatFall {
    0% {
        opacity: 1;
        transform: translateY(-120px) rotate(0deg);
    }
    100% {
        opacity: 0;
        transform: translateY(100vh) rotate(360deg);
    }
}


 /* ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    background: rgba(20, 20, 20, 0.65);
    backdrop-filter: blur(10px);

    z-index: 1000;
    justify-content: center;
    align-items: center;

    padding: 2rem;
}
.modal.active {
    display: flex;
}
/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„*/
.modal-content {
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid rgba(255,255,255,0.25);
    border-radius: 20px;

    max-width: 800px;
    max-height: 80vh;

    box-shadow:
        0 10px 50px rgba(0, 0, 0, 0.4),
        0 0 25px rgba(199, 54, 89, 0.25);
    inset: 0;    
    display: flex;

    flex-direction: column;
    overflow: hidden;
}
.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;

padding: 2rem 4.5rem 1rem 2rem;

    background: rgba(255,255,255,0.05);
    border-bottom: 2px solid rgba(255,255,255,0.25);

    position: sticky;
    top: 0;
    z-index: 10;

    backdrop-filter: blur(10px);
}

.modal-header h2 {
    color: #FFFFFF;
    font-weight: 900;
    letter-spacing: 1px;
    text-shadow: 0 0 6px rgba(255,255,255,0.3);
}
.modal-body {
    padding: 2rem;
    overflow-y: auto;
    flex: 1;
    min-height: 0;
}

.modal-close:hover {
    transform: scale(1.1);
}
.recipe-grid, .achievement-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: minmax(140px, auto);
    gap: 1rem;
    margin-top: 1rem;
}
.recipe-item, .achievement-item {
    min-height: 160px;
    padding: 1rem;
    border-radius: 12px;

    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(245,208,126,0.25);

    text-align: center;
    color: #FFFFFF;
}




.modal-close {
    position: absolute;
    top: 0.6rem;
    right: 0.6rem;

    width: 32px;
    height: 32px;
    border-radius: 50%;

    display: flex;
    align-items: center;
    justify-content: center;

    padding: 0;
    line-height: 1;

    font-size: 1.4rem;
    font-weight: bold;
    color: #fff;

    background: linear-gradient(135deg, #C73659, #A91D3A);
    border: 1px solid rgba(245,208,126,0.6);
    cursor: pointer;

    box-shadow:
        0 0 10px rgba(199,54,89,0.5),
        0 2px 8px rgba(0,0,0,0.4);

    transition: 0.2s;
    z-index: 20;
}


0}px`;

    // ã¡ã‚‡ã£ã¨ã ã‘æ™‚é–“å·®
    span.style.animationDelay = `${Math.random() * 0.2}s`;

    container.appendChild(span);

    // ã‚¢ãƒ‹ãƒ¡ãŒçµ‚ã‚ã£ãŸã‚‰è‡ªå‹•ã§æ¶ˆã™
    span.addEventListener('animationend', () => {
      span.remove();
    });
  }
}



/* è§£æ”¾æ¸ˆã¿*/
.recipe-item.unlocked, .achievement-item.unlocked {
    border-color: #C73659;
    background: rgba(199,54,89,0.12);
}

.recipe-item:hover:not(.locked),
.achievement-item:hover:not(.locked) {
    transform: translateY(-3px);
    background: rgba(199, 54, 89, 0.18);
}
.recipe-icon, .achievement-icon {
    font-size: 3rem;
    margin-bottom: 0.5rem;
    color: #FFFFFF;
}

.locked-icon {
    font-size: 3rem;
    opacity: 0.3;
    color: #FFFFFF;
}



/* æ–™ç†å›³é‘‘ç”¨ */
.recipe-img {
    width: 15%;
    height: auto;
    border-radius: 0px;
    margin-bottom: 0.5rem;

}

.recipe-img.locked {
    filter: brightness(0) invert(0.4) opacity(0.4);
}
/* å®Ÿç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ« */
#achievementsModal .modal-content,
#recipesModal .modal-content {
    max-width: 600px;
    width: 100%;
    margin: 0 auto;
}
/* æ”¯æ´è€…ãƒ‘ãƒãƒ« */
#upgradesList {
    gap: 0.6rem !important;
}
/* è§£æ”¾æ¼”å‡º */
#unlockIcon {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 2 auto;
    width: 100%;
}


.header-se-toggle {
    cursor: pointer;
    font-size: 1.5rem;
    user-select: none;
    transition: transform 0.2s ease;
margin: 0px 0px 0px 0;
}
/* ã‚µã‚¦ãƒ³ãƒ‰ */
.header-se-toggle:hover {
    transform: scale(1.1);
}



.unlock-content {
    background: rgba(255, 255, 255, 0.08);
    
    border: 3px solid rgba(245, 208, 126, 0.6);
    border-radius: 30px;

    padding: 3rem;
    max-width: 550px;
    text-align: center;

    box-shadow:
        0 0 50px rgba(245, 208, 126, 0.35),
        0 0 70px rgba(199, 54, 89, 0.25);

    position: relative;
    overflow: hidden;

    animation: unlockPop 0.4s ease forwards;
    position: relative;
    z-index: 2;
}

/* === æ”¯æ´è€…è§£æ”¾ï¼šã‚­ãƒ©ã‚­ãƒ©ç”¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ === */
.particles {
  position: fixed;
  inset: 0;

  pointer-events: none;
  overflow: visible;

  z-index: 1;          /* èƒŒæ™¯èŠ±ç«ãƒ¬ã‚¤ãƒ¤ãƒ¼ */
}
/* 1å€‹1å€‹ã®çµµæ–‡å­—ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« */
.particle-emoji {
  position: absolute;
  left: 50%;
  top: 45%;
  transform: translate(-50%, -50%) scale(0.4);
  will-change: transform, opacity;
  animation: particleFly 1s ease-out forwards;

 text-shadow:
    0 0 6px rgba(255, 255, 255, 0.9),
    0 0 14px rgba(255, 240, 180, 0.9);
}

/* é£›ã³æ•£ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes particleFly {
   0% {
    transform: translate(-50%, -50%) scale(0.4);
    opacity: 0;
  }
  40% {
    transform: translate(
      calc(-50% + var(--dx) * 0.6),
      calc(-50% + var(--dy) * 0.6)
    ) scale(1.0);
    opacity: 1;
  }
  100% {
    transform: translate(
      calc(-50% + var(--dx)),
      calc(-50% + var(--dy))
    ) scale(1.2);
    opacity: 0;
  }
}



/* PCãƒ»å…±é€šï¼ˆé€šå¸¸ã®è§£æ”¾ã‚¢ãƒ‹ãƒ¡ï¼‰ */
@keyframes unlockPop {
  0% {
    transform: scale(0.3) rotate(-12deg);
    opacity: 0;
  }
  70% {
    transform: scale(1.05) rotate(3deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}


@media (max-width: 768px) {

    @keyframes unlockPop {
        0% {
            transform: scale(0.3) rotate(-15deg);
            opacity: 0;
        }
        100% {
            transform: scale(0.9);
            opacity: 1;
        }
    }

}


.unlock-content::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;

    background: linear-gradient(
        45deg,
        transparent,
        rgba(245, 208, 126, 0.4),
        transparent
    );

    animation: shine 2.5s infinite linear;
}

@keyframes shine {
    0%   { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}
.unlock-title {
    font-size: 1.5rem;
    font-weight: 900;
    margin-bottom: 1.4rem;

    color: #F5D07E;
    text-shadow:
        0 0 20px rgba(245, 208, 126, 0.9),
        0 0 35px rgba(199, 54, 89, 0.4);

    animation: titleGlow 1.4s ease-in-out infinite;
}

@keyframes titleGlow {
    0%, 100% {
        text-shadow:
            0 0 20px rgba(245, 208, 126, 0.9),
            0 0 35px rgba(199, 54, 89, 0.4);
    }
    50% {
        text-shadow:
            0 0 40px rgba(245, 208, 126, 1),
            0 0 60px rgba(199, 54, 89, 0.6);
    }
}


.upgrade-icon-img {
    width: 28px;
    height: 28px;
    object-fit: contain;
}

.unlock-name {
    font-size: 2.4rem;
    font-weight: 900;
    margin: 1rem 0;

    color: #F5D07E;
    text-shadow:
        0 0 30px rgba(245, 208, 126, 0.8),
        0 0 50px rgba(199, 54, 89, 0.4);
}
.unlock-description {
    font-size: 1.2rem;
    margin: 1.5rem 0;
    opacity: 0.95;
    color: #FFFFFF;
}
.unlock-stats {
    display: block;
    max-width: 300px;
    width: 100%; 
    margin: 1.5rem auto;

    background: rgba(245, 208, 126, 0.12);
    border: 2px solid rgba(245, 208, 126, 0.6);
    border-radius: 15px;

    padding: 1rem;
    font-size: 1.1rem;
    color: #FFFFFF;
    text-align: left;
    line-height: 1.4;
}
.recruit-button {
width: 360px; 
    height: 80px;
white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    background: linear-gradient(135deg, #C73659, #A91D3A);
    border: 3px solid rgba(245, 208, 126, 0.8);

    color: white;
    padding: 1.5rem 5rem;
    border-radius: 70px;

    cursor: pointer;
    font-weight: 1000;
    font-size: 2rem;

    margin-top: 1.5rem;

transition: transform 0.5s ease-out;
    box-shadow:
        0 6px 20px rgba(199, 54, 89, 0.45),
        0 0 15px rgba(245, 208, 126, 0.25); 

    animation: buttonPulse 1.6s ease-in-out infinite;
    position: relative;
    z-index: 1;
}

@keyframes buttonPulse {
    0%, 100% {
        box-shadow:
            0 10px 40px rgba(199, 54, 89, 0.5),
            0 0 20px rgba(245, 208, 126, 0.35);
    }
    50% {
        box-shadow:
            0 15px 60px rgba(199, 54, 89, 0.7),
            0 0 35px rgba(245, 208, 126, 0.5);
    }
}

.recruit-button:hover {
transform: scale(1.02);

}

.recruit-button:active {
    transform: scale(0.97);
}


/* ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å…¨ä½“ */
.particles {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    pointer-events: none;
    overflow: hidden;
}

/* å€‹åˆ¥ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«*/
.particle {
    position: absolute;
    font-size: 2rem;

    opacity: 0;
    animation: particleFloat 3s ease-in-out infinite;
    color: rgba(245, 208, 126, 0.9);
    filter: drop-shadow(0 0 10px rgba(245, 208, 126, 0.8));
}

@keyframes particleFloat {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-120px) rotate(360deg);
        opacity: 0;
    }
}
.particle.red {
    color: #C73659;
    filter: drop-shadow(0 0 12px rgba(199, 54, 89, 0.8));
}

.particle.gold {
    color: #F5D07E;
    filter: drop-shadow(0 0 12px rgba(245, 208, 126, 0.9));
}

.particle.white {
    color: #FFFFFF;
    filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.7));
}
.notification {
    position: fixed;
    top: 100px;
    right: 20px;
    background: linear-gradient(
        135deg,
        #C73659 0%,
        #A91D3A 100%
    );

    border: 2px solid rgba(245, 208, 126, 0.9);

    border-radius: 12px;
    padding: 1rem 1.5rem;

    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.4),
        0 0 18px rgba(199, 54, 89, 0.35);

    z-index: 2000;

    animation: slideIn 0.5s ease, slideOut 0.5s ease 4.5s;
    min-width: 300px;

    color: #FFFFFF;
    font-weight: bold;
    letter-spacing: 0.5px;
white-space: pre-line;
}
@keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to   { transform: translateX(0); opacity: 1; }
}
@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to   { transform: translateX(400px); opacity: 0; }
}

/* ãƒ•ã‚£ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰*/
.status-panel.fever {
    border-color: #F5D07E;
    background: linear-gradient(
        135deg,
        rgba(199, 54, 89, 0.25),
        rgba(169, 29, 58, 0.25)
    );

    box-shadow:
        0 0 35px rgba(199, 54, 89, 0.7),
        0 0 55px rgba(245, 208, 126, 0.45);

    animation: feverPulse 1s ease-in-out infinite;
}
/* ã‚¯ãƒªãƒƒã‚¯ãƒ–ãƒ¼ã‚¹ãƒˆ*/
.meat-button.click-boost {
    border-color: #F5D07E;
    box-shadow:
        0 0 40px rgba(199, 54, 89, 0.75),
        0 0 60px rgba(245, 208, 126, 0.5);

    animation: clickBoostPulse 1s ease-in-out infinite;
}
@keyframes feverPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow:
            0 0 35px rgba(199, 54, 89, 0.7),
            0 0 55px rgba(245, 208, 126, 0.45);
    }
    50% {
        transform: scale(1.03);
        box-shadow:
            0 0 55px rgba(199, 54, 89, 1),
            0 0 75px rgba(245, 208, 126, 0.6);
    }
}

@keyframes clickBoostPulse {
    0%, 100% {
        box-shadow:
            0 0 40px rgba(199, 54, 89, 0.75),
            0 0 60px rgba(245, 208, 126, 0.5);
    }
    50% {
        box-shadow:
            0 0 60px rgba(199, 54, 89, 1),
            0 0 80px rgba(245, 208, 126, 0.65);
    }
}



.right-panel::after,
.supporter-panel::after {
    pointer-events: none !important;
}

/* ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–ãƒœã‚¿ãƒ³ */
#clickUpgradeButton {
    background: linear-gradient(135deg, #C73659, #A91D3A);
    color: #FFFFFF;

    border: 1px solid rgba(245, 208, 126, 0.9);
    border-radius: 999px;

    padding: 0.6rem 1.6rem;
    font-size: 0.95rem;
    font-weight: 700;
    letter-spacing: 0.03em;

    cursor: pointer;
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.35),
        0 0 12px rgba(199, 54, 89, 0.45);

    transition:
        transform 0.1s ease,
        box-shadow 0.1s ease,
        filter 0.1s ease;
     display: block;
    margin: 0.9rem auto 0.6rem;
}

#clickUpgradeButton:hover {
    transform: translateY(-1px);
    box-shadow:
        0 6px 16px rgba(0, 0, 0, 0.45),
        0 0 16px rgba(245, 208, 126, 0.6);
    filter: brightness(1.08);
}

#clickUpgradeButton:active {
    transform: translateY(1px) scale(0.98);
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.35),
        0 0 8px rgba(199, 54, 89, 0.4);
    filter: brightness(0.95);
}      

/* ãƒ¬ãƒ™ãƒ«MAXæ™‚ã®ãƒœã‚¿ãƒ³ */
#clickUpgradeButton:disabled,
#clickUpgradeButton.click-upgrade-disabled {
    background: rgba(120, 120, 120, 0.8);
    border-color: rgba(245, 208, 126, 0.3);
    color: #ddd;
    cursor: not-allowed;
    box-shadow: none;
    filter: none;
    transform: none;
}

#clickUpgradeButton:disabled:hover,
#clickUpgradeButton:disabled:active {
    transform: none;
    box-shadow: none;
    filter: none;
}

/* =========================
   1200px ä»¥ä¸‹ï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€œå°å‹PCï¼‰
   ========================= */
@media (max-width: 1200px) {

    .container {
        grid-template-columns: 1fr;
        gap: 0.1rem;
        padding: 0 1rem;
    }

    header {
        flex-direction: column;
        text-align: center;
        gap: 0.6rem;
    }

    .header-left {
        flex: 0 0 auto;
    }

    header h1 {
        font-size: 1.6rem;
    }

.upgrade-panel{
        margin-top: 0.25rem;
        margin-bottom: 0.25rem;

    }

   .status-panel{
    margin-top: 0rem;
    margin-bottom: 0.1rem;



    }

.upgrades-panel {
    margin-top: 0.2rem;
    margin-bottom: 0.2rem;
    }

    .click-area {
        margin-top: 0.2rem;
    }

    .meat-button {
        width: 200px;
        height: 200px;
    }

.main-container {
    gap: 0.1rem;
    padding: 0.3rem;
}


}



@media (max-height: 800px) {
  .modal {
    align-items: flex-start;
  }

  .modal-content {
    margin-top: 2vh;
    max-height: 96vh;
  }
}


/* =========================
   768px ä»¥ä¸‹ï¼ˆã‚¹ãƒãƒ›ï¼‰
   ========================= */
@media (max-width: 768px) {

    header {
        padding: 0.6rem 1rem;
    }

    header h1 {
        font-size: 1.4rem;
        letter-spacing: 1px;
    }

    .subtitle {
        font-size: 0.75rem;
    }

    .header-buttons {
        gap: 0.rem;
    }

    .header-btn {
        padding: 0.35rem 0.2rem;
        font-size: 0.85rem;
    }

.unlock-title {
    font-size: 1rem;
    }

#upgradesList {
        grid-template-columns: 1fr !important;
        gap: 0.5rem;
    }
 
 #clickUpgradeButton {
      width: 100%;
      padding: 0.9rem 0.7rem;
      font-size: 1rem;
      text-align: center;
      box-sizing: border-box;
     margin-top: 0.5rem;
      margin-bottom: 0.4rem;
  }    
    
  .supporters-panel #upgradesList .upgrade-item > *:last-child,
  .supporters-panel #upgradesList button > *:last-child {
    margin-bottom: 0 !important;
  }

.status-panel,
.click-area,
.upgrades-panel {
    align-self: stretch;
}
    .meat-button {
        width: 160px;
        height: 160px;
    }

.pc-only {
        display: none;
    }
    .sp-only {
        display: inline;
    }
    .status-panel,
    .upgrade-panel {
width: 100%;
      margin-top: 0.5rem;
        margin-bottom: 0.5rem;
      padding: 0.6rem 1rem 0.3rem;
    }
    .upgrade-panel h2 {
    font-size: 1.1rem;
    margin-bottom: 0.4rem;
    color: #FFFFFF;
    }
}

        

@media (max-width: 768px) {
    .container {
        gap: 0.8rem;
row-gap: 0.5rem;
    }
    .status-panel,
    .upgrade-panel {
        margin-top: 0.25rem;
        margin-bottom: 0.25rem;
    }

    .recipe-grid,
    .achievement-grid {
        grid-template-columns: repeat(2, 1fr);
    }

}



 /* =========================
   ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚«ãƒ¼ï¼ˆã‚¹ãƒãƒ›èª¿æ•´ï¼‰
   ========================= */
.news-ticker {
    padding: 0.5rem 0.6rem;
    font-size: 0.78rem;
    margin: 0.6rem auto;

    border-width: 2px;
    border-color: rgba(245, 208, 126, 0.35);
}



/* =========================
   ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚«ãƒ¼
   ========================= */

/* å¤–æ ï¼šè¦‹ã›ã‚‹ç¯„å›²ã®ç®± */
.news-ticker {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
}


.news-content {
    display: inline-block;
    white-space: nowrap;
    padding-left: 100%; 
    animation: news-ticker 22s linear infinite;
    font-size: 0.95rem;
}


@keyframes news-ticker {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-100%);
    }
}

/* ã‚¹ãƒãƒ›ã®ã¨ãã ã‘ã€å°‘ã—ã‚†ã£ãã‚Šï¼†å°ã•ã‚æ–‡å­—ã«ã™ã‚‹ä¾‹ */
@media (max-width: 768px) {
    .news-content {
        animation-duration: 26s;   /* æ™‚é–“ã‚’é•·ãï¼ã‚†ã£ãã‚Šæµã‚Œã‚‹ */
        font-size: 0.85rem;
    }
}


/* =========================
   ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
   ========================= */
.main-container {
    gap: 1rem;
    padding: 1rem;
}


/* =========================
   ã‚¹ãƒãƒ›ç”¨ï¼ˆ768pxä»¥ä¸‹ï¼‰
   ========================= */
@media (max-width: 768px) {

  .status-panel h2 {
    font-size: 1.1rem;
    margin-bottom: 0.4rem;
    color: #FFFFFF;
  }

  .status-panel > div:first-of-type {
    font-size: 0.8rem !important;
    margin-bottom: 0.5rem !important;
  }

  /* æ”¯æ´è€…ãƒ‘ãƒãƒ«è‡ªä½“ã®ä½™ç™½ã‚’è©°ã‚ã‚‹ */
  .supporters-panel {
    padding: 0.9rem !important;
    border-radius: 16px;
    max-height: 420px;
  }

  .supporters-panel h2 {
    font-size: 1.1rem;
    margin-bottom: 0.4rem;
    color: #FFFFFF;
  }

  /* ä¸€è¦§ã®ä¸Šä¸‹ã®ä½™ç™½ãŒã‚ã‚Œã°è©°ã‚ã‚‹ */
  #upgradesList {
    gap: 0.6rem;
  }

  #upgradesList .upgrade-item,
  #upgradesList .upgrade-card,
  #upgradesList .upgrade,
  #upgradesList > div {
    padding: 0.7rem 0.8rem !important;
    margin-bottom: 0.6rem !important;
    border-radius: 14px;
  }

  #upgradesList img {
    width: 40px;
    height: 40px;
  }

    
 /* æ”¯æ´è€…ã‚«ãƒ¼ãƒ‰ãŒbuttonã®å ´åˆï¼šä¸­ã®ä½™ç™½ã‚’è©°ã‚ã‚‹ */
.supporters-panel #upgradesList button {
  padding: 0.6rem 0.8rem !important;
  min-height: auto !important;
  line-height: 1.2;
}

  /* ãƒœã‚¿ãƒ³ã®ä¸­èº«ã®ç¸¦ä½™ç™½ãŒå¤šã„æ™‚ã®ä¿é™º */
.supporters-panel #upgradesList button * {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.supporters-panel .upgrade-inner {
    height: auto !important; 
  }
}
@media (max-width: 768px) {
  #upgradesList{
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  #upgradesList .upgrade-item{
    margin-bottom: 0 !important;
  }
 .supporters-panel .upgrade-item {
    padding: 0.7rem 0.8rem 0.55rem !important;
    margin-bottom: 0.6rem !important;
  }
}

/* è‚‰ã‚«ã‚¦ãƒ³ãƒˆ */
.meat-count {
    font-size: 1.8rem;
    margin: 0.4rem 0;
    color: rgba(245, 208, 126, 0.95);
text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

/* 1ç§’ã‚ãŸã‚Šè‚‰ */
.per-second {
    font-size: 0.85rem;
    padding: 0.5rem;
    margin-bottom: 0.6rem;

    background: rgba(199, 54, 89, 0.15);
}


/* å€‹åˆ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡Œ */
.stat-item {
    font-size: 0.78rem;
    padding: 0.4rem 0;
    border-bottom: 1px solid rgba(245, 208, 126, 0.25);
}

   /* =========================
   ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢ï¼ˆã‚¹ãƒãƒ›æœ€é©åŒ–ï¼‰
   ========================= */
.click-area {
    position: relative;
    overflow: hidden;
    background: none;

  }


/* ã¼ã‹ã—èƒŒæ™¯ç”»åƒ */
.click-area::before {
    content: "";
    position: absolute;
    inset: 0;

    background-image: url("images/cafe_bg.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    filter: blur(5px);
    opacity: 0.45;

    will-change: filter;
    z-index: 0;
}

@media (max-width: 768px) {
    .click-area::before {
        filter: blur(4px);
        opacity: 0.32;
    }
}

/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å‰é¢ã«æˆ»ã™ */
.click-area > * {
    position: relative;
    z-index: 1;
}

/* ã‚»ãƒªãƒ•ãƒãƒ–ãƒ«ï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰ */
.speech-bubble {
    padding: 0.7rem 1rem;
    min-height: clamp(48px, 10vw, 70px);

    font-size: clamp(0.9rem, 2.8vw, 1.2rem);
    line-height: 1.35;

    background: rgba(255, 255, 255, 0.85);
    color: #222;

    border: 2px solid rgba(245, 208, 126, 0.4);

    border-radius: 14px;
    backdrop-filter: blur(4px);

    box-shadow: 0 0 15px rgba(0,0,0,0.4);
}

/* è‚‰ãƒœã‚¿ãƒ³ï¼ˆä¸»å½¹ãƒ»ã‚¹ãƒãƒ›ã‚µã‚¤ã‚ºï¼‰ */
.meat-button {
    width: min(65vw, 280px);
    height: min(65vw, 280px);

    filter: drop-shadow(0 0 10px rgba(245, 208, 126, 0.4));
    transition: 0.2s ease;
    touch-action: manipulation;
}

.meat-button:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 0 15px rgba(245, 208, 126, 0.55));
}

.meat-button:active {
    transform: scale(0.95);
}


#upgradesList {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;

  grid-auto-rows: auto;
}

/* å„ã‚«ãƒ¼ãƒ‰ã®ã‚µã‚¤ã‚ºèª¿æ•´ */
.upgrade-item {
    width: 100%;
    box-sizing: border-box;
    padding: 1rem;
    border-radius: 12px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(245, 208, 126, 0.25);
}
.upgrades-panel {
    padding: 1rem 0.8rem;
    border-radius: 12px;
    background: rgba(255,255,255,0.05);
    border: 2px solid rgba(245, 208, 126, 0.25);
    box-shadow:         
0 8px 32px rgba(0, 0, 0, 0.25),
0 0 20px rgba(199, 54, 89, 0.18);
}

/* è¦‹å‡ºã—*/
.upgrades-panel h2 {
    margin-bottom: 1rem;
    text-align: center;
    font-size: 1.5rem;
    color: #FFFFFF;
}

/* ã‚¢ã‚¤ã‚³ãƒ³ */
.upgrade-icon {
    font-size: 1.3rem;
    flex-shrink: 0;
}

.upgrade-name {
    font-size: 0.7rem;
    margin: 0 0.4rem;
    flex-grow: 1;
    white-space: nowrap; 
}

.upgrade-count {
    font-size: 0.8rem;
    padding: 0.15rem 0.5rem;
    border-radius: 8px;
    flex-shrink: 0;
}
/* ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–æ  */
.modal {
    padding: 0.6rem;
}

/* ã‚¬ãƒ©ã‚¹èƒŒæ™¯ã®ã¾ã¾ç¸®å° */
.modal-content {
    max-width: 95%;
    max-height: calc(100vh - 20px);
    border-radius: 18px;
    background: rgba(255,255,255,0.07);
    border: 2px solid rgba(245,208,126,0.35);
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.modal-header {
    padding: 0.9rem;
padding-right: 56px;
    border-bottom: 2px solid rgba(245,208,126,0.35);
}

.modal-header h2 {
    font-size: 1.2rem;
    color: #FFFFFF;
}

/* æœ¬æ–‡ */
.modal-body {
    padding: 1rem;
}


 .recipe-img {
      width: 50%;  }

.recipe-icon, .achievement-icon {
    font-size: 2.2rem;
}

.recipe-item strong, .achievement-item strong {
    font-size: 0.85rem;
    color: #F5D07E;
    margin-bottom: 0.3rem;
}

.recipe-item p, .achievement-item p {
    padding: 0.05rem;
    margin-top: 0.3rem;
    font-size: 0.75rem !important;
    opacity: 0.9;
    color: #FFFFFF;
}

/* ã‚¬ãƒ©ã‚¹æ„Ÿ*/
.unlock-content {
  width: min(92vw, 550px);
  max-height: 90vh;
    padding: 2rem 1.8rem;
    border-radius: 20px;
    background: rgba(255,255,255,0.08);
    border: 2px solid rgba(245,208,126,0.6);
}

/* ã‚¿ã‚¤ãƒˆãƒ«ãƒ»åå‰ãƒ»èª¬æ˜ */
.unlock-content h2 {
    font-size: 1rem;
    color: #F5D07E;
}

.unlock-icon {
    width: 300px;
    height: 300px;
    margin: 20px auto;
    display: flex;
    justify-content: center;
    align-items: center;
}

.unlock-icon img {
    width: 90%;
    height: 90%;
    object-fit: contain;
    filter:
        drop-shadow(0 0 15px rgba(245, 208, 126, 0.7))
        drop-shadow(0 0 25px rgba(199, 54, 89, 0.35));
}

.unlock-name {
 font-size: 2rem;
    margin: 1.2rem 0;
    color: #F5D07E;
}

.unlock-description {
    font-size: 1.35rem !important; 
    margin: 1.5rem 0;
    line-height: 1.6;
    color: #FFFFFF;
    opacity: 0.95;
}

/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.unlock-stats {
    padding: 1rem;
    margin: 1.2rem auto;

    font-size: 1rem !important;

    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(245,208,126,0.45);
    border-radius: 12px;

    max-width: 320px;
    width: 100%;
    text-align: center;
    line-height: 1.6;
}
/* å‹§èª˜ãƒœã‚¿ãƒ³ */
.recruit-button {
    padding: 0.1rem 1rem;
    font-size: 1rem;
    margin-top: 0.3rem;
    margin-bottom: 1rem;

    background: linear-gradient(135deg, #C73659, #A91D3A);
    border: 2px solid rgba(245,208,126,0.8);
}


 /* ãƒ¢ãƒ‹ã‚¿ãƒ¼ã®é«˜ã•ãŒå°ã•ã„æ™‚ã€å…¨ä½“ã‚’ç¸®å°ã™ã‚‹ */
@media (max-height: 800px) {
    .unlock-content {
        padding: 1rem 0.8rem;
        max-width: 500px;     /* å°‘ã—ç´°ãã™ã‚‹ï¼ç¸¦ã‚‚ç¸®ã‚€ */
    }

    .unlock-icon-img {
        width: 80px; /* ã‚¢ã‚¤ã‚³ãƒ³ã‚‚å°‘ã—å°ã•ãã—ã¦é«˜ã•ã‚’ç¢ºä¿ */
    }

    #unlockDescription,
    #unlockStats {
        font-size: 0.5rem; /* é•·ã„æ–‡ç« ã®è¡Œæ•°ã‚’æ¸›ã‚‰ã™ */
        line-height: 1.3;
    }
  .unlock-name {
        font-size: 1.6rem;
    }

    .unlock-description {
        font-size: 0.95rem;
    }

.unlock-stats {
        font-size: 1rem; 
    }
}


    .recruit-button {
        font-size: 1rem;
        width: 230px;
        height: 50px;
        padding: 0.5rem 3rem;
    }
}

@media (max-height: 720px) {
    .unlock-stats {
        font-size: 0.9rem;
    }
}

/* =========================
   ã‚¹ãƒãƒ›ç”¨ï¼ˆ480pxä»¥ä¸‹ï¼‰
   ========================= */
@media (max-width: 480px) {
    .container {
        gap: 0;
row-gap: 0.1rem;
    }
.status-panel,
.click-area,
.upgrades-panel {
    align-self: stretch;
}
    .status-panel,
    .click-area {
    margin-top: 0rem;
    margin-bottom: 0rem;
    }

.upgrades-panel,
upgrades-panel {
    margin-top: 0.3rem;
    margin-bottom: 0.5rem;
    }

    /* ç‹‚ä»‹ã‚’å°ã•ãã™ã‚‹ */
    .meat-button {
        width: 200px;
        height: 200px;
    }

    /* ç‹‚ä»‹ã®ç”»åƒã‚‚ç¸®å°ã«åˆã‚ã›ã¦èª¿æ•´ï¼ˆè‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆï¼‰ */
    .meat-button img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* ã‚»ãƒªãƒ•ãƒãƒ–ãƒ«ã®æ–‡å­—ã‚’å°‘ã—å°ã•ãã—ã¦åã¾ã‚Šè‰¯ã */
    .speech-bubble {
        font-size: 0.7rem;
        padding: 0.6rem 1rem;
    }

    /* ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢å…¨ä½“ã«å°‘ã—ä½™ç™½ã‚’æŒãŸã›ã‚‹ */
    .click-area {
        padding: 1rem 0;
    }




}
    /* iPhone SE */
@media (max-width: 360px) {
    .meat-button {
        width: 190px;
        height: 190px;
    }
}




/* =========================
   é€šçŸ¥ - ã‚¹ãƒãƒ›è¡¨ç¤º
   ========================= */
.notification {
    top: 80px;
    right: 10px;
    left: auto;

    padding: 1rem 1.2rem;

    white-space: pre-line;
    word-break: break-word; 
    line-height: 1.4;

    max-width: 80vw;
    min-width: 200px;

    background: linear-gradient(135deg, #C73659 0%, #A91D3A 100%);
    border: 2px solid rgba(245, 208, 126, 0.8);
    border-radius: 10px;

    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.45),
        0 0 12px rgba(245, 208, 126, 0.4);
}/* =========================
   ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚«ãƒ¬ãƒ¼ï¼ˆã‚¹ãƒãƒ›ï¼‰
   ========================= */
.golden-curry {
    position: fixed;        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚‚ä¸­å¤®ã«å±…ç¶šã‘ã‚‹ */
    left: 50%;
    top: 50%;
    font-size: 100px;
transform: translate(-50%, -50%);

    z-index: 999999;        /* ä»–UIã‚ˆã‚Šçµ¶å¯¾å‰ã«å‡ºã™ */

    width: 200px;           /* ã‚¹ãƒãƒ›ã§ã‚‚æŠ¼ã—ã‚„ã™ã„ã‚µã‚¤ã‚º */
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;

    pointer-events: auto;  
    filter:
        drop-shadow(0 0 25px rgba(245, 208, 126, 0.75))
        drop-shadow(0 0 40px rgba(199, 54, 89, 0.35));

    touch-action: manipulation; /* ã‚¿ãƒƒãƒ—é…å»¶ãƒ»ã‚ºãƒ¬é˜²æ­¢ */
}

@media (max-width: 480px) {
    .golden-curry {
        width: 160px;
        height: 160px;
    }
}

@media (max-width: 360px) {
    .golden-curry {
        width: 140px;
        height: 140px;
    }
}


/* =========================
   ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ï¼ˆã‚¹ãƒãƒ›ï¼‰
   ========================= */
.particle {
    font-size: 1.5rem;
    opacity: 0.9;

    filter: drop-shadow(0 0 8px rgba(245, 208, 126, 0.8));
}
/* =========================
   ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ å…¨ä½“çµ±ä¸€ç‰ˆ
   ========================= */
::-webkit-scrollbar {
    width: 10px;
}

/* ãƒˆãƒ©ãƒƒã‚¯ï¼ˆèƒŒæ™¯ï¼‰ */
::-webkit-scrollbar-track {
    background: rgba(40, 40, 40, 0.6);
    border-radius: 5px;
}

/* ã¤ã¾ã¿ */
::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #F5D07E, #C73659);
    border-radius: 5px;
    border: 1px solid rgba(255,255,255,0.2);
}

/* hover æ¼”å‡º */
::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #FFE8B5, #D53E63);
}

/* ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆå…±é€šï¼‰ */
.click-effect {
    position: absolute;
    font-size: 1.5rem;
    font-weight: bold;
    pointer-events: none;
    animation: floatUp 1s ease-out forwards;
    z-index: 1000;

    text-shadow: 0 0 6px rgba(0,0,0,0.4);
}


/* =========================
   NORMALï¼ˆé€šå¸¸ãƒ’ãƒƒãƒˆï¼‰
   ========================= */
.click-effect.normal {
    color: #C73659;
    text-shadow: 0 0 10px rgba(199, 54, 89, 0.5);
}


/* =========================
   CRITICALï¼ˆã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼‰
   ========================= */
.click-effect.critical {
    color: #F5D07E;
    font-size: 2rem;

    text-shadow:
        0 0 12px rgba(245, 208, 126, 0.9),
        0 0 25px rgba(199, 54, 89, 0.4);
}


/* =========================
   FEVERï¼ˆãƒ•ã‚£ãƒ¼ãƒãƒ¼ï¼‰
   ========================= */
.click-effect.fever {
    color: #FF6F8F;
    font-size: 2.4rem;

    text-shadow:
        0 0 20px rgba(199, 54, 89, 0.9),
        0 0 35px rgba(245, 208, 126, 0.6);
}


/* =========================
   BOOSTï¼ˆã‚¯ãƒªãƒƒã‚¯7å€ï¼‰
   ========================= */
.click-effect.boost {
    color: #FFFFFF;
    font-size: 2rem;

    text-shadow:
        0 0 18px rgba(245, 208, 126, 0.8),
        0 0 35px rgba(199, 54, 89, 0.5);
}


/* æµ®ãä¸ŠãŒã‚Šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes floatUp {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    50% {
        opacity: 1;
        transform: translateY(-40px) scale(1.15);
    }
    100% {
        opacity: 0;
        transform: translateY(-80px) scale(0.8);
    }
}
/* =========================
   ãƒ•ãƒƒã‚¿ãƒ¼
   ========================= */
footer {
    background: linear-gradient(
        135deg,
        #2a2a2a 0%,
        #5c5758 60%,
        #3a2a2f 100%
    );
    
    color: #FFFFFF;
    text-align: center;

    padding: 2rem 1rem;
    margin-top: 3rem;

    border-top: 3px solid #C73659;
    box-shadow: 0 -4px 20px rgba(199, 54, 89, 0.25);
}
footer p {
    max-width: 800px;
    margin: 0 auto 1.5rem;
    line-height: 1.8;
    font-size: 0.95rem;
    color: rgba(255,255,255,0.9);
}

footer span {
    color: #C73659;
    font-weight: bold;
}

footer strong {
    color: #F5D07E;
}

/* è£œè¶³ãƒ†ã‚­ã‚¹ãƒˆ */
footer small {
    color: rgba(255,255,255,0.6);
    font-size: 0.85rem;
}


/* =========================
   ãƒ•ãƒƒã‚¿ãƒ¼ãƒ»ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
   ========================= */
.footer-reset-btn {
    background: linear-gradient(135deg, #C73659 0%, #A91D3A 100%);
    border: 2px solid rgba(245, 208, 126, 0.8);
    color: #FFFFFF;

    padding: 0.8rem 2rem;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    font-size: 0.9rem;

    box-shadow: none; 
    transition: all 0.3s ease;
}

.footer-reset-btn:hover {
    background: linear-gradient(135deg, #D84C70 0%, #C73659 100%);
    border-color: rgba(245,208,126,1);

    transform: scale(1.05);
    box-shadow: none;
}
/* hoverï¼š
.footer-reset-btn:hover {
    background: linear-gradient(135deg, #D84C70 0%, #C73659 100%);
    border-color: rgba(245, 208, 126, 1);

    transform: scale(1.05);
    box-shadow:
        0 0 25px rgba(199, 54, 89, 0.55),
        0 0 35px rgba(245, 208, 126, 0.45);
}


/* ============================
   ã‚¹ãƒãƒ›å°‚ç”¨ã‚µã‚¤ã‚ºèª¿æ•´
   ============================ */
@media (max-width: 480px) {

    /* ç‹‚ä»‹ã‚’å°ã•ãã™ã‚‹ */
    .meat-button {
        width: 200px;
        height: 200px;
    }

    /* ç‹‚ä»‹ã®ç”»åƒã‚‚ç¸®å°ã«åˆã‚ã›ã¦èª¿æ•´ï¼ˆè‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆï¼‰ */
    .meat-button img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* ã‚»ãƒªãƒ•ãƒãƒ–ãƒ«ã®æ–‡å­—ã‚’å°‘ã—å°ã•ãã—ã¦åã¾ã‚Šè‰¯ã */
    .speech-bubble {
        font-size: 0.7rem;
        padding: 0.6rem 1rem;
    }

    /* ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢å…¨ä½“ã«å°‘ã—ä½™ç™½ã‚’æŒãŸã›ã‚‹ */
    .click-area {
        padding: 1rem 0;
    }
}
    /* iPhone SE */
@media (max-width: 360px) {
    .meat-button {
        width: 190px;
        height: 190px;
    }
}



@media screen and (orientation: landscape) and (max-width: 900px) {
  body::after {
    content: "ç¸¦ç”»é¢ã§ãƒ—ãƒ¬ã‚¤ã—ã¦ãã ã•ã„";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,1);
    color: white;
    font-size: 1.8rem;
    display: flex;
    align-items: center;
    justify-content: center;

    z-index: 999999;

    pointer-events: auto;
  }
}
@media (max-width: 480px) {
    .unlock-icon {
        width: 200px;
        height: 200px;
    }
}




@media (max-width: 768px) {
    .unlock-content {
        width: 100%;
    }
}

/* =========================
   ã‚¹ãƒãƒ›ç”¨ãƒ•ãƒƒã‚¿ãƒ¼èª¿æ•´
   ========================= */
@media (max-width: 768px) {
    footer {
        padding: 1.2rem 0.8rem;
        margin-top: 2rem;
        font-size: 0.85rem;
        line-height: 1.6;
    }

    footer p {
        margin-bottom: 1rem;
    }

    footer a {
        font-size: 0.9rem;
    }

    .footer-reset-btn {
        width: 100%;
        padding: 0.9rem 0;
        font-size: 1rem;
        border-radius: 8px;
        margin-top: 0.8rem;
    }
}


* {
  -webkit-tap-highlight-color: transparent;
}
button, a {
  -webkit-tap-highlight-color: transparent;
}


@media (min-width: 769px) {
    .status-panel {
        margin-bottom: 0.45rem;
    }
}

/* ã‚«ãƒ¼ãƒ‰ã‚’ã‚°ãƒªãƒƒãƒ‰ã®åˆ—å¹…ã„ã£ã±ã„ã«åºƒã’ã‚‹ä¿é™º */
.recipe-grid,
.achievement-grid {
    justify-items: stretch;
}

.recipe-item,
.achievement-item {
    width: 100%;
    box-sizing: border-box;
}



/* =========================
   éŠã³æ–¹ãƒœã‚¿ãƒ³ & ãƒ¢ãƒ¼ãƒ€ãƒ«
   ========================= */


/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã®èƒŒæ™¯ï¼ˆç°è‰²ï¼‰ */
.help-modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;

  background: rgba(0,0,0,0.65);
}


.help-modal.active{
  display: flex;
}


.help-modal__content{
  width: min(760px, calc(100vw - 24px));
  max-height: calc(100vh - 24px);
  overflow: auto;

  background: rgba(255,255,255,0.10);
  border: 2px solid rgba(255,255,255,0.20);
  border-radius: 18px;
  padding: 1.2rem 1.2rem 1.1rem;

  position: relative;
  color: #fff;
  backdrop-filter: blur(10px);
}


.help-modal__close{
  position: absolute;
  top: 10px;
  right: 10px;

  width: 44px;
  height: 44px;
  border-radius: 12px;

  border: 2px solid rgba(245,208,126,0.55);
  background: rgba(0,0,0,0.35);
  color: #fff;
  cursor: pointer;
  font-size: 1.4rem;
  line-height: 1;
}


.help-title{
  font-size: 1.4rem;
  font-weight: 900;
  margin: 0 0 1rem;
}


.help-body{
  line-height: 1.6;
}

.help-head{
  font-weight: 900;
  font-size: 1.05rem;
  margin: 0.9rem 0 0.25rem;
}

.help-text{
  opacity: 0.95;
  font-size: 0.98rem;
}
body.modal-open {
  overflow: hidden;
}


@media (max-width: 768px){
  .help-title{ font-size: 1.25rem; }
  .help-modal__content{ padding: 1rem; }
}
  


/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ”ãƒ¼ç”¨ */
.status-panel .copy-btn{
  display: block;

  margin-top: 0.3rem;
  margin-bottom: 0.3rem;

  padding: 0.45rem 0.9rem;
  font-size: 0.7rem;
  border-radius: 12px;
  width: fit-content;
}
        
    </style>

</head>
<body>
<header>
    <div class="header-left">
        <h1>ğŸ– ç‹‚ä»‹ã‚¯ãƒªãƒƒã‚«ãƒ¼</h1>
    </div>

    <div class="header-right">
        <div class="header-buttons">
  <button class="header-btn" id="helpBtn" type="button">â“ éŠã³æ–¹</button>
        <button class="header-btn" onclick="openRecipes()">ğŸ“– æ–™ç†å›³é‘‘</button>
        <button class="header-btn" onclick="openAchievements()">ğŸ† å®Ÿç¸¾</button>
        <button class="header-btn" onclick="saveGame()">ğŸ’¾ ä¿å­˜</button>
    </div>

        <div class="header-se-toggle" onclick="toggleSound()">
            <span id="soundIcon">ğŸ”Š</span>
        </div>
    </div>
</header>
    <div class="news-ticker">
        <div class="news-content" id="news"></div>
    </div>

 <div class="container">

    <div class="left-column">

        <!-- å·¦: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ‘ãƒãƒ« -->
        <div class="status-panel" id="statusPanel">
            <h2>ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
<button class="header-btn copy-btn" id="copyMeatBtn" type="button">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
            <div style="text-align: center; font-size: 1rem; opacity: 0.7; margin-bottom: 0.5rem; color: var(--text-dark);">ç¾åœ¨ã®ä¿æœ‰è‚‰æ•°</div>
            <div class="meat-count" id="meatCount">0</div>
            <div class="per-second">ğŸ¥© <span id="perSecond">0</span> è‚‰/ç§’</div>
            <div class="stat-item">
                <span>ç´¯è¨ˆç²å¾—è‚‰æ•°</span>
                <span id="totalMeat">0</span>
            </div>
            <div class="stat-item">
                <span>ç·ã‚¯ãƒªãƒƒã‚¯æ•°</span>
                <span id="totalClicks">0</span>
            </div>
            <div class="stat-item">
                <span>è§£æ”¾æ¸ˆã¿æ–™ç†</span>
                <span id="unlockedRecipes">0/20</span>
            </div>
            <div class="stat-item">
                <span>é”æˆæ¸ˆã¿å®Ÿç¸¾</span>
                <span id="unlockedAchievements">0/22</span>
            </div>
        </div>

        <!-- â˜… å·¦ä¸‹ï¼šå¼·åŒ–ãƒœã‚¿ãƒ³ -->
<div class="upgrade-panel">
    <h2>ğŸ‹ğŸ»â€â™‚ï¸ ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–</h2>

    <!-- ç‹‚ä»‹ã‚¢ã‚¤ã‚³ãƒ³ï¼‹ç¾åœ¨ã®å¼·åŒ–æƒ…å ± -->
    <div class="click-upgrade-info">
        <img src="images/kyosuke_icon.png" alt="ç‹‚ä»‹ã‚¢ã‚¤ã‚³ãƒ³" class="click-upgrade-icon">

        <div class="upgrade-text">
            <div class="upgrade-title">è‚‰ãƒˆãƒ¬ï¼ˆLv.<span id="clickLevelText">0</span>ï¼‰</div>
            <div class="upgrade-desc">
    <!-- PCç”¨-->
    <span class="pc-only">
        1ã‚¯ãƒªãƒƒã‚¯ = +<span id="clickPowerPc">0</span>
        <br>æ¬¡ã®è‚‰ãƒˆãƒ¬ã¾ã§ï¼šã‚ã¨<span id="clickNextCost">0</span>è‚‰
    </span>
    <!-- ã‚¹ãƒãƒ›ç”¨-->
<span class="sp-only">
  1ã‚¿ãƒƒãƒ— = +<span id="clickPowerSp">0</span>
</span>
</div>
        </div>
    </div>

    <!-- å¼·åŒ–ãƒœã‚¿ãƒ³ -->
<button id="clickUpgradeButton" onclick="upgradeClickPower()">è‚‰ãƒˆãƒ¬ã‚’ã™ã‚‹ï¼</button>
</div>

    </div>

    <!-- ãƒ•ã‚§ãƒ¼ãƒ‰ -->
    <div class="screen-fade" id="fade"></div>

    <!-- ä¸­å¤®: ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢ -->
    <div class="click-area">
        <div class="speech-bubble" id="speechBubble">
            ç‹‚ä»‹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å§‹ã‚ã‚ˆã†!ğŸ–
        </div>
        <div style="position: relative;">
<button class="meat-button" id="meatButton" onclick="handleClick(event)">
                <img id="meatImage" src="images/kyosuke1.png" alt="ç‹‚ä»‹" />
            </button>
            <div id="clickEffects" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden;"></div>
        </div>
    </div>

    <!-- å³: ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ‘ãƒãƒ« -->
<div class="upgrades-panel supporters-panel">
    <h2>ğŸ‘¥ æ”¯æ´è€…</h2>
    <div id="upgradesList"></div>
</div>

</div>
    <!-- æ”¯æ´è€…è§£æ”¾ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="unlock-modal" id="unlockModal">
            <div class="particles" id="particles"></div>
        <div class="unlock-content">
            <div class="unlock-title">ğŸ‰ æ–°ã—ã„æ”¯æ´è€…ãŒè§£æ”¾ã•ã‚Œã¾ã—ãŸ!ğŸ‰</div>
            <div class="unlock-icon" id="unlockIcon"></div>
            <div class="unlock-name" id="unlockName"></div>
            <div class="unlock-description" id="unlockDescription"></div>
            <div class="unlock-stats" id="unlockStats"></div>
            <button class="recruit-button" onclick="closeUnlockModal()">å¿œæ´ã‚’è¦è«‹ã™ã‚‹ï¼</button>
        </div>
    </div>

<!-- æ–™ç†å›³é‘‘ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆæ¼”å‡ºãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="unlock-modal" id="recipeCompleteModal">
    <div class="unlock-content">
        <div class="unlock-title">ğŸ½ï¸ æ–™ç†å›³é‘‘ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼</div>

        <div class="unlock-description">
            å…¨ã¦ã®æ–™ç†ã‚’åˆ¶è¦‡ã—ãŸï¼<br>
            ãŠã‚ã§ã¨ã†ã€å›ã¯ç«‹æ´¾ãªâ€œè‚‰å¥‰å…¬è€…â€ã ã€‚
            <br><br><br>
            ãƒ¬ã‚ªãƒ³ã€Œâ€¦ã“ã‚“ãªã«ä½œã£ãŸã®ã¯åˆã‚ã¦ã§ã™ï¼ï¼ã€<br>
            ç´«è‹‘ã€Œè‰²ã‚“ãªæ–™ç†ã‚’ä½œã‚Œã¦æ¥½ã—ã‹ã£ãŸãªãã€<br>
            æ¾ä¹‹åŠ©ã€Œç‹‚ä»‹â€¦ãŠå‰æœ¬å½“ã«å¤§ä¸ˆå¤«ãªã®ã‹â€¦ï¼Ÿã€<br>
            ç‹‚ä»‹ã€ŒãŠã†ï¼ï¼ã€€ã¾ã ã¾ã ã„ã‘ã‚‹ãœï¼ï¼ã€<br>
            çš‡ç´€ã€Œâ€¦ãã®è…¹ã€ä¸€åº¦è§£ä½“ã•ã›ã‚ã€<br>
            ç‚ºå£«ã€Œãƒã‚«ã¯èƒƒè¢‹ã‚‚ãƒã‚«ã ã£ãŸã‹â€¦ã€<br><br><br>
        </div>

        <button class="recruit-button" onclick="closeRecipeComplete()">OK</button>
    </div>
</div>
<!-- ğŸ‰ å®Ÿç¸¾ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="unlock-modal" id="achievementCompleteModal">
    <div class="unlock-content">
        <div class="unlock-title">ğŸ‰ å…¨å®Ÿç¸¾ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼</div>

        <div class="unlock-description">
ãŠã‚ã§ã¨ã†ï¼<br>
å›ã¯ã“ã®è‚‰ç¥­ã‚Šã®å…¨è¨˜éŒ²ã‚’åˆ¶è¦‡ã—ãŸï¼
<br><br><br>
ç‹‚ä»‹ã€ŒãŠã¾ãˆâ€¦ãƒã‚¸ã§ã‚„ã£ãŸãªã€‚æµçŸ³ã«ã‚‚ã†é£Ÿãˆã­ã‚§ãœâ€¦ã€<br>
æ¾ä¹‹åŠ©ã€ŒãŠç–²ã‚Œã€ç‹‚ä»‹ã€‚ã“ã“ã¾ã§ã‚„ã‚Šåˆ‡ã‚‹ã¨ã¯â€¦æœ¬å½“ã«ã™ã”ã„ã‚ˆã€<br>
ç‚ºå£«ã€Œâ€¦â€¦ã“ã‚ŒãŒæœ¬ç‰©ã®ãƒã‚«ã‹â€¦â€¦ã€<br><br>Thanks for playing our game!<br>
        </div>

        <button class="recruit-button" onclick="closeAchievementComplete()">OK</button>
    </div>
</div>



    <!-- æ–™ç†å›³é‘‘ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="recipesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“– æ–™ç†å›³é‘‘</h2>
                <button class="modal-close" onclick="closeModal('recipesModal')">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="recipe-grid" id="recipeGrid"></div>
            </div>
        </div>
    </div>

    <!-- å®Ÿç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="achievementsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ† å®Ÿç¸¾</h2>
                <button class="modal-close" onclick="closeModal('achievementsModal')">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="achievement-grid" id="achievementGrid"></div>
            </div>
        </div>
    </div>

    <script>



// ===============================
// ã‚¹ãƒãƒ›åˆ¤å®š
// ===============================
function isMobile() {
    return window.matchMedia("(max-width: 768px)").matches;
}

// ã‚¹ãƒãƒ›å°‚ç”¨ï¼šã‚¯ãƒªãƒƒã‚¯æ¸‹æ»é˜²æ­¢ãƒ•ãƒ©ã‚°
let lastClick = 0;
let clickSoundCooldown = false;
let animRunning = false;
let effectRunning = false;
// ===============================
// ğŸ“± ã‚¹ãƒãƒ›å°‚ç”¨ è»½é‡ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
// ===============================
function clickMeatMobile(event) {

    // â‘  é€£æ‰“é–“å¼•ãï¼ˆ10msï¼‰
    const now = performance.now();
    if (now - lastClick < 10) return;
    lastClick = now;

    // â‘¡ è‚‰åŠ ç®—ï¼ˆPCç‰ˆã¨åŒã˜ï¼‰
    const base = getClickValue();
    const power = gameState.clickBoost ? base * 7 : base;
    gameState.meat += power;
    gameState.totalMeatEarned += power;
    gameState.rawClicks += 1;
    gameState.totalClicks += getClickValue();

    // â‘¢ ã‚¢ãƒ‹ãƒ¡ï¼ˆ3ã‚³ãƒï¼‰é–“å¼•ã
    if (!animRunning) {
        animRunning = true;
        const img = document.getElementById("meatImage");

        img.src = kyosukeHalf;

        setTimeout(() => { img.src = kyosuke2; }, 60);
        setTimeout(() => {
            img.src = kyosuke1;
            animRunning = false;
        }, 100);
    }

    // â‘£ éŸ³ã®å¤šé‡å†ç”Ÿç¦æ­¢
    if (!clickSoundCooldown) {
        clickSoundCooldown = true;
        const s = meatClickSound.cloneNode();
        s.play().catch(() => {});
        setTimeout(() => clickSoundCooldown = false, 40);
    }

    // â‘¤ ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆæœ€å°é™ï¼‰
    if (!effectRunning) {
        effectRunning = true;
        showClickEffect(power, 50, 50);
        setTimeout(() => effectRunning = false, 100);
    }

    // â‘¥ PCç‰ˆã¨åŒã˜å¾Œå‡¦ç†
    showDialogue();
    updateDisplay();
    checkUpgradeUnlocks();
    checkRecipes();
    checkAchievements();
}

// ===============================
// ğŸ“± ã‚¹ãƒãƒ›ãªã‚‰è»½é‡ç‰ˆã‚¯ãƒªãƒƒã‚¯é–¢æ•°ã«åˆ‡ã‚Šæ›¿ãˆ
// ===============================
function handleClick(event) {
    if (isMobile()) {
        clickMeatMobile(event);
    } else {
        clickMeat(event);
    }
}




















// =======================
// ã‚µã‚¦ãƒ³ãƒ‰ç®¡ç†
// =======================
let audioContext = null;
function ensureAudio() {
    if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
    }
}

function toggleSound() {
    soundEnabled = !soundEnabled;
    localStorage.setItem("soundEnabled", soundEnabled);
    updateSoundIcon();
}

function updateSoundIcon() {
    const icon = document.getElementById("soundIcon");
    icon.textContent = soundEnabled ? "ğŸ”Š" : "ğŸ”‡";
}






// =======================
// ä»¥ä¸‹ã‚²ãƒ¼ãƒ æœ¬ä½“ã®å‡¦ç†
// =======================

        // ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æç”»
        function renderUpgrades() {
    const list = document.getElementById('upgradesList');
    list.innerHTML = '';

    gameState.upgrades.forEach((upgrade, index) => {
        const cost = Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.count));
        const production = (upgrade.baseProduction * upgrade.count).toFixed(1);
        const unlocked = gameState.unlockedUpgrades.includes(index);

        const item = document.createElement('div');
        item.dataset.upgradeIndex = index;

        if (unlocked) {
    const canAfford = gameState.meat >= cost;

    item.className = 'upgrade-item';
    if (!canAfford) {
        item.classList.add('disabled'); 
    }

    item.innerHTML = `
 <div class="upgrade-inner">
        <div class="upgrade-header">
            <span class="upgrade-icon">
                <img src="${upgrade.icon}" class="upgrade-icon-img" alt="${upgrade.name}">
            </span>
            <span class="upgrade-name">${upgrade.name}</span>
            <span class="upgrade-count">Lv.${upgrade.count}</span>
        </div>
        <div class="upgrade-info">
            <span>ğŸ’° ${formatNumber(cost)}</span>
            <span>ğŸ“ˆ ${production}/ç§’</span>
        </div>
    </div>
`;

} else {
    item.className = 'upgrade-item locked';
    item.innerHTML = `
        <div class="upgrade-header">
            <span class="upgrade-icon">ğŸ”’</span>
            <span class="upgrade-name">???</span>
        </div>
        <div class="upgrade-info">
            <span style="font-size: 0.85rem; opacity: 0.7;">è§£æ”¾æ¡ä»¶æœªé”æˆ</span>
        </div>
    `;
}

        list.appendChild(item);
    });
}
// ====================================================
//  ã‚µã‚¦ãƒ³ãƒ‰
// ====================================================
// è‚‰ã‚¯ãƒªãƒƒã‚¯ç”¨ã‚µã‚¦ãƒ³ãƒ‰
const meatClickSound = new Audio('sounds/mogmog.mp3');
function playMeatClickSound() {
if (!soundEnabled) return;

    const s = meatClickSound.cloneNode();
    s.play().catch(e => console.log("éŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:", e));
}

// æ”¯æ´è€…è§£æ”¾ã‚µã‚¦ãƒ³ãƒ‰
const upgradeUnlockSound = new Audio('sounds/kaihou.mp3');


function playUpgradeUnlockSound() {
if (!soundEnabled) return;
    const s = upgradeUnlockSound.cloneNode();
    s.play().catch(e => console.log("éŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:", e));
}

// ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è³¼å…¥ã‚µã‚¦ãƒ³ãƒ‰
const upgradeBuySound = new Audio('sounds/upgrade.mp3');

function playUpgradeBuySound() {
if (!soundEnabled) return;
    const s = upgradeBuySound.cloneNode();
    s.play().catch(e => console.log("éŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:", e));
}

// è‚‰ãƒˆãƒ¬å¼·åŒ–ã‚µã‚¦ãƒ³ãƒ‰
const clickUpgradeSound = new Audio('sounds/nikutore.mp3');

function playClickUpgradeSound() {
    if (!soundEnabled) return;
    const s = clickUpgradeSound.cloneNode();
    s.play().catch(e => console.log("éŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:", e));
}


// ===== ã‚µã‚¦ãƒ³ãƒ‰è¨­å®š =====
let soundEnabled = true;


      // ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
        const upgrades = [
            { id: 1, name: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', icon: 'images/upgrade01.png', baseCost: 100, baseProduction: 1, unlockCondition: () => true, description: 'ã¿ã‚“ãªã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚æƒ…å ±ç¶²ã‚’é§†ä½¿ã—ã¦è‚‰ã‚’èª¿é”ã—ã¦ãã‚Œã‚‹' },
            { id: 2, name: 'ãƒ¬ã‚ªãƒ³', icon: 'images/upgrade02.png',  baseCost: 500, baseProduction: 5, unlockCondition: () => gameState.upgrades[0].count > 0, description: 'ã‚·ã‚´ãƒ‡ã‚­ã‚¹ãƒ¼ãƒ‘ãƒ¼åŸ·äº‹ã€‚åœ§å€’çš„ãªèª¿ç†ã‚¹ã‚­ãƒ«ã§å¤§é‡ã®è‚‰æ–™ç†ã‚’ç”Ÿç”£ã™ã‚‹' },
            { id: 3, name: 'æ¾ä¹‹åŠ©', icon: 'images/upgrade03.png', baseCost: 2000, baseProduction: 10, unlockCondition: () => gameState.totalMeatEarned >= 20000, description: 'ç‹‚ä»‹ã®è‰¯ãç†è§£è€…ã§ã‚ã‚Šå…„è²´åˆ†ã€‚ç‹‚ä»‹ã®ç•°å¸¸ãªé£Ÿã¹ã£ã·ã‚Šã‚’å¿ƒé…ã—ã¤ã¤ã‚‚æ‰‹ä¼ã£ã¦ãã‚Œã¦ã„ã‚‹' },
            { id: 4, name: 'ç´«è‹‘', icon: 'images/upgrade04.png', baseCost: 5000, baseProduction: 20, unlockCondition: () => gameState.totalMeatEarned >= 50000, description: 'æ–™ç†ä¸Šæ‰‹ãªå‹äººã€‚ã€Œçã—ã„è‚‰æ–™ç†ã‚’ä½œã£ã¦ã¿ãŸã„ã‚“ã ã€ã¨æ‰‹ä¼ã„ã«æ¥ã¦ãã‚ŒãŸ' },
            { id: 5, name: 'è‚‰å±‹ã®åº—ä¸»', icon: 'images/upgrade05.png', baseCost: 8000, baseProduction: 40, unlockCondition: () => gameState.totalMeatEarned >= 150000, description: 'ãƒã‚¤ãƒˆå…ˆã®è‚‰å±‹ã‚‚å‚æˆ¦ï¼ç‹‚ä»‹ã®ãŸã‚ã«æ–°é®®ãªè‚‰ã‚’å®‰å®šä¾›çµ¦ã—ã¦ãã‚Œã‚‹ãï¼' },
            { id: 6, name: 'ç‚ºå£«', icon: 'images/upgrade06.png', baseCost: 20000, baseProduction: 100, unlockCondition: () => gameState.totalMeatEarned >= 300000, description: 'å‘†ã‚Œé¡”ã§è¦‹ã¤ã‚ã¦ã„ã‚‹ãŒã€å¹²æ¸‰ã—ãªã„ã“ã¨ã§å”åŠ›ã—ã¦ãã‚Œã¦ã„ã‚‹...ã®ã‹ã‚‚ã—ã‚Œãªã„' },
            { id: 7, name: 'æˆ´å¤©', icon: 'images/upgrade07.png', baseCost: 80000, baseProduction: 500, unlockCondition: () => gameState.totalMeatEarned >= 800000, description: 'ç‹‚ä»‹ã®èƒƒè¢‹ã«èˆˆå‘³ã‚’æŒã£ãŸã‚‰ã—ã„ã€‚è‚‰ã‚’æä¾›ã™ã‚‹ä»£ã‚ã‚Šã«ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šã«æ¥ãŸ' },
            { id: 8, name: 'çš‡ç´€', icon: 'images/upgrade08.png', baseCost: 200000, baseProduction: 2000, unlockCondition: () => gameState.totalMeatEarned >= 1000000, description: 'å•†æ¥­åœ°åŒºã®æ–™ç†äººã€‚ç‹‚ä»‹ã®é£Ÿã¹ã£ã·ã‚Šã«è§¦ç™ºã•ã‚ŒãŸã‚‰ã—ã„ã€‚ãã®åŒ…ä¸æŒãã¯ã¨ã¦ã‚‚ãƒ¯ã‚¤ãƒ«ãƒ‰' }
        ];

        const recipes = [
            { id: 1, name: 'å”æšã’', icon: 'ğŸ—',image: 'images/recipes/food1.png', requirement: 10, description: 'å®šç•ªã®ç¾å‘³ã—ã•ã€‚ã‚«ãƒªãƒƒã¨ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ï¼' },
            { id: 2, name: 'ã‚«ãƒ¬ãƒ¼', icon: 'ğŸ›',image: 'images/recipes/food2.png', requirement: 50, description: 'ã‚¹ãƒ‘ã‚¤ã‚¹ãŒåŠ¹ã„ãŸæ¿ƒåšãªå‘³ã‚ã„' },
            { id: 3, name: 'ã‚¿ã‚³ã‚¹', icon: 'ğŸ¥©',image: 'images/recipes/food3.png', requirement: 250, description: 'ã‚¹ãƒ‘ã‚¤ã‚¹é¦™ã‚‹è‚‰ã¨é‡èœã‚’åŒ…ã‚“ã ã€æ‰‹è»½ã§è±ªå¿«ãªä¸€å“' },
            { id: 4, name: 'å¤§ç››ã‚Šè‚‰ã‚«ãƒ¬ãƒ¼', icon: 'ğŸ›',image: 'images/recipes/food4.png', requirement: 1000, description: 'ã‚´ãƒ­ã‚´ãƒ­è‚‰ãŒãŸã£ã·ã‚Šï¼' },
            { id: 5, name: 'ç‰›ä¸¼', icon: 'ğŸœ',image: 'images/recipes/food5.png', requirement: 3000, description: 'ç”˜è¾›ã„ã‚¿ãƒ¬ãŒæŸ“ã¿è¾¼ã‚“ã ã”é£¯' },
            { id: 6, name: 'ãƒãƒ³ãƒãƒ¼ã‚°', icon: 'ğŸ–',image: 'images/recipes/food6.png', requirement: 10000, description: 'è‚‰æ±æº¢ã‚Œã‚‹æ¥µä¸Šã®ä¸€å“' },
            { id: 7, name: 'ãƒãƒ¼ã‚¯ã‚½ãƒ†ãƒ¼', icon: 'ğŸ–',image: 'images/recipes/food7.png', requirement: 35000, description: 'ãƒã‚¿ãƒ¼ã®é¦™ã‚Šè±Šã‹ãªè±šè‚‰' },
            { id: 8, name: 'ã‚¹ãƒ†ãƒ¼ã‚­', icon: 'ğŸ—',image: 'images/recipes/food8.png', requirement: 77777, description: 'ãƒŸãƒ‡ã‚£ã‚¢ãƒ ãƒ¬ã‚¢ã®å®Œç’§ãªç„¼ãåŠ æ¸›' },
            { id: 9, name: 'ã‚«ãƒªãƒ¼ãƒ´ãƒ«ã‚¹ãƒˆ', icon: 'ğŸ”¥',image: 'images/recipes/food9.png', requirement: 120000, description: 'ã‚«ãƒ¬ãƒ¼ã‚±ãƒãƒ£ãƒƒãƒ—ãŒçµ¡ã‚€ãƒ‰ã‚¤ãƒ„ã®åç‰©ã‚½ãƒ¼ã‚»ãƒ¼ã‚¸' },
            { id: 10, name: 'ãƒã‚­ãƒ³å—è›®', icon: 'ğŸ²',image: 'images/recipes/food10.png', requirement: 200000, description: 'ç”˜é…¢ã¨ã‚¿ãƒ«ã‚¿ãƒ«ãŒçµ¶å¦™ãªã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³' },
            { id: 11, name: 'é‰„æ¿ç„¼ã', icon: 'ğŸ–',image: 'images/recipes/food11.png', requirement: 350000, description: 'ç†±ã€…ã®é‰„æ¿ã§ç„¼ãä¸Šã’ãŸé¦™ã°ã—ã„è‚‰' },
            { id: 12, name: 'ãƒ¤ãƒ³ãƒ‹ãƒ§ãƒ ãƒã‚­ãƒ³', icon: 'ğŸ‘…',image: 'images/recipes/food12.png', requirement: 600000, description: 'ç”˜è¾›ãƒ€ãƒ¬ãŒæŸ“ã¿è¾¼ã‚“ã ã€ã‚¯ã‚»ã«ãªã‚‹éŸ“å›½å¼ãƒ•ãƒ©ã‚¤ãƒ‰ãƒã‚­ãƒ³' },
            { id: 13, name: 'ã™ãç„¼ã', icon: 'ğŸ¥©',image: 'images/recipes/food13.png', requirement: 900000, description: 'ç”˜è¾›ã„ã‚¿ãƒ¬ãŒçµ¶å¦™' },
            { id: 14, name: 'ç„¼è‚‰å®šé£Ÿ', icon: 'ğŸ–',image: 'images/recipes/food14.png', requirement: 1200000, description: 'ç‚­ç«ã§ç„¼ã„ãŸé¦™ã°ã—ã„è‚‰' },

            { id: 15, name: 'ç´…ç„¼è‚‰', icon: 'ğŸ¥©',image: 'images/recipes/food15.png', requirement: 1600000, description: 'ã¨ã‚ã‘ã‚‹ã‚ˆã†ã«ç…®è¾¼ã¾ã‚ŒãŸä¸­è¯å¼è§’ç…®ã®æ¿ƒåšãªæ—¨å‘³' },
            { id: 16, name: 'ï½½ï¾Šï¾Ÿï½¹ï¾ï½¯ï¾ƒï½¨ï½¥ï½³ï½¨ï½½ï¾ï½¥ï¾ï½°ï¾„ï¾ï¾ï½°ï¾™', icon: 'ğŸ¥©',image: 'images/recipes/food16.png', requirement: 2000000, description: 'è‚‰ãŸã£ã·ã‚Šã®ãƒŸãƒ¼ãƒˆãƒœãƒ¼ãƒ«ã¨æ¿ƒåšã‚½ãƒ¼ã‚¹ãŒçµ¡ã‚€å®šç•ªãƒ‘ã‚¹ã‚¿' },
            { id: 17, name: 'ç‰›ãƒ•ã‚£ãƒ¬ã‚¹ãƒ†ãƒ¼ã‚­', icon: 'ğŸ¥©',image: 'images/recipes/food17.png', requirement: 2800000, description: 'ã»ã©ã‘ã‚‹ã‚ˆã†ãªæŸ”ã‚‰ã‹ã•ã‚’æŒã¤ã€èµ¤èº«ã®æœ€é«˜å³°' },
            { id: 18, name: 'ä¼èª¬ã®ç†Ÿæˆè‚‰', icon: 'ğŸ‚',image: 'images/recipes/food18.png', requirement: 3700000, description: 'æ•°æ—¥ã‹ã‚‰æ•°ãƒ¶æœˆã‹ã‘ã¦ç†Ÿæˆã•ã›ãŸå¹»ã®ä¸€å“' },
            { id: 19, name: 'ãƒ¬ã‚ªãƒ³ç‰¹æ€§ã‚¹ãƒšã‚·ãƒ£ãƒ«è‚‰ã‚«ãƒ¬ãƒ¼', icon: 'ğŸŒ¶ï¸',image: 'images/recipes/food19.png', requirement: 4600000, description: 'ç‹‚ä»‹ã®ãŸã‚ã«ä½œã‚‰ã‚ŒãŸç©¶æ¥µã®ä¸€çš¿' },
            { id: 20, name: 'ç‹‚ä»‹ã®è‚‰å¢—ã—ãƒ‰ãƒªãƒ¼ãƒ ä¸¼', icon: 'ğŸ†',image: 'images/recipes/food20.png', requirement: 6000000, description: 'ã™ã¹ã¦ã®è‚‰ãŒä¹—ã£ãŸæœ€çµ‚å½¢' }
        ];

const achievements = [
    { id: 1, name: 'åˆã‚ã¦ã®ä¸€å£', icon: 'ğŸ˜ƒ', 
      condition: () => gameState.totalMeatEarned >= 1,
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰1å€‹é”æˆ' },

    { id: 2, name: 'ä¸€äººå‰ã®è‚‰å¥‰è¡Œ', icon: 'ğŸ¥©', 
      condition: () => gameState.totalMeatEarned >= 10000,
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰10,000å€‹é”æˆ' },

    { id: 3, name: 'ãŠã‹ã‚ã‚Šä¸‰æ˜§', icon: 'ğŸ¥£', 
      condition: () => gameState.totalMeatEarned >= 50000,
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰50,000å€‹é”æˆ' },

    { id: 4, name: 'ç‹‚ä»‹ã®èƒƒè¢‹ã‚’æº€ãŸã—ãŸè€…', icon: 'ğŸ˜‹', 
      condition: () => gameState.totalMeatEarned >= 100000,
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰100,000å€‹é”æˆ' },

    { id: 12, name: 'ã‚¯ãƒªãƒƒã‚¯ç‹‚', icon: 'ğŸ–±',
      condition: () => gameState.totalClicks >= 10000,
      description: 'ç·ã‚¯ãƒªãƒƒã‚¯æ•°ã®ç´¯è¨ˆãŒ10,000å›é”æˆ' },

    { id: 17, name: 'ãƒ­ã‚±ãƒƒãƒˆã‚¹ã‚¿ãƒ¼ãƒˆ', icon: 'ğŸš€',
      condition: () => gameState.rocketStart,
      description: 'ã‚²ãƒ¼ãƒ é–‹å§‹ã‹ã‚‰1åˆ†ä»¥å†…ã«è‚‰100å€‹é”æˆ' },

    { id: 15, name: 'è‚‰é€Ÿ5æ®µ', icon: 'ğŸ¥„',
      condition: () => gameState.speedRun5min,
      description: '5åˆ†ä»¥å†…ã«è‚‰10,000å€‹åˆ°é”' },

    { id: 5, name: 'ãŠè‚‰ãƒã‚¹ã‚¿ãƒ¼', icon: 'ğŸ¥³',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.upgrades.some(u => u.count > 0),
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰10,000å€‹+æ”¯æ´è€…1äººä»¥ä¸Š' },

    { id: 11, name: 'ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ¬ãƒ¼', icon: 'ğŸ›',
      condition: () => gameState.goldenCurryClicks >= 1,
      description: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³è‚‰ã‚«ãƒ¬ãƒ¼1å›ã‚¯ãƒªãƒƒã‚¯' },



    { id: 22, name: 'è‚‰ã®æ¢æ±‚è€…', icon: 'ğŸ¤ ',
      condition: () => gameState.unlockedRecipes.length >= 10,
      description: 'æ–™ç†å›³é‘‘10ç¨®è§£æ”¾' },

    { id: 8, name: 'è‚‰ç‹å€™è£œ', icon: 'ğŸ¤š',
      condition: () => gameState.totalMeatEarned >= 500000,
      description: 'ãƒ—ãƒ¬ã‚¤ç´¯è¨ˆè‚‰500,000å€‹é”æˆ' },

    { id: 13, name: 'è‚‰å¯Œè±ª', icon: 'ğŸ¤´',
      condition: () => gameState.meat >= 100000,
      description: 'ä¸€åº¦ã«è‚‰100,000å€‹ä»¥ä¸Šä¿æœ‰' },

    { id: 16, name: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚«ãƒ¼', icon: 'ğŸƒ',
      condition: () => gameState.clicksInTenSeconds >= 40,
      description: '10ç§’é–“ã«40å›ä»¥ä¸Šã‚¯ãƒªãƒƒã‚¯' },

    { id: 18, name: 'ãƒ©ã‚¤ãƒ€ãƒ¼ãŸã¡ã®æ”¯æ´', icon: 'ğŸ‘ª',
      condition: () => gameState.orderMaster,
      description: 'æ¾ä¹‹åŠ©â†’ç´«è‹‘â†’ç‚ºå£«â†’æˆ´å¤©â†’çš‡ç´€ã®é †ç•ªã§è³¼å…¥' },

    { id: 20, name: 'ã‚»ãƒªãƒ•ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼', icon: 'ğŸ—£ï¸',
      condition: () => gameState.heardDialogues.size >= 32,
      description: 'å…¨32ç¨®é¡ã®ã‚»ãƒªãƒ•ã‚’èã' },



    { id: 6, name: 'è‚‰å›³é‘‘åˆ¶è¦‡', icon: 'ğŸ‘¨â€ğŸ³',
      condition: () => gameState.unlockedRecipes.length >= 20,
      description: 'å…¨æ–™ç†20ç¨®è§£æ”¾' },

    { id: 9, name: 'è‚‰ãƒã‚«', icon: 'ğŸ–',
      condition: () => gameState.totalClicks >= 500000,
      description: 'ç·ã‚¯ãƒªãƒƒã‚¯æ•°ã®ç´¯è¨ˆãŒ500,000å›é”æˆ' },

    { id: 10, name: 'ç‹‚ä»‹ç‹‚ã„', icon: 'ğŸ‘¹',
      condition: () => gameState.totalClicks >= 1000000,
      description: 'ç·ã‚¯ãƒªãƒƒã‚¯æ•°ã®ç´¯è¨ˆãŒ1,000,000å›é”æˆ' },

    { id: 19, name: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒã‚¹ã‚¿ãƒ¼', icon: 'â­',
      condition: () => gameState.goldenCurryClicks >= 10,
      description: 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³è‚‰ã‚«ãƒ¬ãƒ¼ã‚’10å›ã‚¯ãƒªãƒƒã‚¯' },

    { id: 14, name: 'è‚‰ã®ç•ªäºº', icon: 'âš”ï¸',
      condition: () => gameState.upgrades.every(u => u.count >= 20),
      description: 'æ”¯æ´è€…å…¨å“¡ã‚’Lv20ä»¥ä¸Šã«è‚²æˆ' },



    { id: 7, name: 'æ”¾ç½®ãƒ—ãƒ¬ã‚¤', icon: 'ğŸ“±',
      condition: () => gameState.offlineMaxTime >= 21600,
      description: '6æ™‚é–“ä»¥ä¸Šã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§æ”¾ç½®' },

    { id: 21, name: 'çœŸã®è‚‰å¥‰å…¬è€…', icon: 'ğŸª',
condition: () => gameState.achievements.filter(a => a).length >= (achievements.length - 1)
               && gameState.meat >= 1000000,
      description: 'å…¨å®Ÿç¸¾é”æˆï¼‹è‚‰1,000,000å€‹ä¿æœ‰' }
];


const dialogues = [


    { text: 'è‚‰ãƒˆãƒ¬ã®ç‡ƒæ–™è£œçµ¦ã ãƒƒï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ã†ã—ã£ã€é£Ÿã£ãŸåˆ†ã ã‘é›ãˆã‚‹ãï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ãŠã£ï¼ã€€ã†ã¾ãã†ã ãªï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ã‚‚ã£ã¨ãã‚Œï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'è‚‰æœ€é«˜ï¼ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'è‚‰ãŒé£Ÿã¹æ”¾é¡Œã¨ã‹æœ€é«˜éããƒ³ã ã‚ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ã‚¬ãƒƒãƒ„ãƒªã„ãããƒƒï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ä»Šæ—¥ã¯è‚‰ç¥­ã‚Šã‹ï¼Ÿï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ãã‚ãã‚è‚‰ãƒˆãƒ¬ã—ã¨ãã‹â€¦â€¦ï¼Ÿï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ãŸã‚“ã±ãè³ªãŒå…¨èº«ã«æŸ“ã¿æ¸¡ã‚‹ãœã‚§ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned < 10000 },

    { text: 'ã¾ã ä½™è£•ã ãœâ€¦â€¦', rarity: 'rare',
      condition: () => gameState.totalMeatEarned < 10000 },



    { text: 'â€¦â€¦ã¡ã‚‡ã£ã¨é£Ÿã„ã™ããŸã‹ã‚‚ã—ã‚Œã­ã‚§â€¦â€¦', rarity: 'rare',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ã‚‚ã£ã¨ã â€¦â€¦ã‚‚ã£ã¨ãã‚Œï¼ï¼ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ç¾å‘³ã™ãã ã‚ï¼ï¼ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'è‚‰æœ€é«˜ï¼ï¼ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ã‚¦ã‚©ã‚ªã‚ªã‚ªã‚ªã‚ªï¼ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'â€¦â€¦ã‚ªãƒã‚¨ã€çµæ§‹ã™ã’ã‡å¥´ãªã‚“ã ãª', rarity: 'rare',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ä¿ºã®è‚‰ã‚²ãƒ¼ã‚¸ãŒæ­¢ã¾ã‚‰ã­ã‚§ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'è‚‰ãƒˆãƒ¬ã—ã¨ãã‹â€¦â€¦', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ä¿ºã®èƒƒè¢‹ã€ä½•å‡¦ã¾ã§ã„ã‘ã‚‹ã‚“ã â€¦â€¦', rarity: 'rare',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },

    { text: 'ä¿ºãŒï¼‘ç•ªã ï¼ï¼ï¼ï¼ï¼ï¼', rarity: 'rare',
      condition: () => gameState.totalMeatEarned >= 10000 && gameState.totalMeatEarned < 500000 },



    { text: 'ãƒã‚¸ã§æ­¢ã¾ã‚Œã­ã‚§â€¦â€¦ä¿ºã€ã„ã¾æœ€å¼·ã‹ã‚‚ã—ã‚Œã­ã‚§â€¦â€¦', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'è‚‰ãŒæ¥ã‚‹ãŸã³ã«èº«ä½“ãŒå¿œãˆã¦ã‚„ãŒã‚‹â€¦â€¦ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'ãã‚ãã‚è‚‰ãƒˆãƒ¬ã—ã¨ãã‹â€¦â€¦ï¼Ÿï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦ã†ã·ã£', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦è‚‰æœ€é«˜ï¼ï¼', rarity: 'normal',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦ä¸€æ—¦ã€ä¼‘ã¾ã›ã¦â€¦â€¦ãã‚Œâ€¦â€¦', rarity: 'rare',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦ã‚ã‚ŠãŒã¨ãª', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦ã‚‚ã†â€¦â€¦ç„¡ç†ã‹ã‚‚ã—ã‚Œã­ã‡â€¦â€¦', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'â€¦â€¦ã‚ªãƒã‚¨â€¦â€¦æ­£æ°—ã‹â€¦â€¦ï¼Ÿ', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'ã‚ªãƒã‚¨ã€ãƒã‚¸ã§ã‚¹ã‚²ã‚§ã‚ˆâ€¦â€¦', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },

    { text: 'ã‚ªãƒã‚¨ã¨ãªã‚‰â€¦â€¦ã‚‚ã£ã¨å¼·ããªã‚Œãã†ã ', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },
    
    { text: 'æœ€å¼·æœ€ææœ€ç‹‚ï¼ï¼ï¼', rarity: 'super-rare',
      condition: () => gameState.totalMeatEarned >= 500000 },
];


let dialogueLocked = false;
let dialogueTimeout = null;

// æ¡ä»¶ã«åˆã†ã‚»ãƒªãƒ•å–å¾—
function getAvailableDialogues() {
    return dialogues.filter(d => d.condition());
}

// ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•é¸æŠ
function getRandomDialogue() {
    const list = getAvailableDialogues();
    if (list.length === 0) return null;

    // ãƒ¬ã‚¢ãƒªãƒ†ã‚£æŠ½é¸
    const r = Math.random();
    let filtered = [];

    if (r < 0.02) filtered = list.filter(d => d.rarity === "super-rare");
    else if (r < 0.10) filtered = list.filter(d => d.rarity === "rare");
    else filtered = list.filter(d => d.rarity === "normal");

    return filtered.length > 0
        ? filtered[Math.floor(Math.random() * filtered.length)]
        : list[Math.floor(Math.random() * list.length)];
}

// è¡¨ç¤ºå‡¦ç†ï¼ˆrare/super-rare ã¯å›ºå®šè¡¨ç¤ºï¼‰
function showDialogue() {
    if (dialogueLocked) return;

    const bubble = document.getElementById("speechBubble");
    const d = getRandomDialogue();
    if (!d) return;

    bubble.textContent = d.text;
    bubble.className = "speech-bubble " + d.rarity;

    // è¨˜éŒ²
    gameState.heardDialogues.add(d.text);

    // ãƒ¬ã‚¢æ¼”å‡ºã¯å›ºå®šæ™‚é–“ãƒ­ãƒƒã‚¯
    if (d.rarity === "rare" || d.rarity === "super-rare") {
        dialogueLocked = true;

        clearTimeout(dialogueTimeout);
        dialogueTimeout = setTimeout(() => {
            dialogueLocked = false;
            bubble.className = "speech-bubble";
        }, d.rarity === "super-rare" ? 2000 : 1500);

        return;
    }
}

        const newsMessages = [
            'ğŸ“° é™½çœŸã€ã¾ã å…¥ã‚‹ã®ï¼ï¼Ÿã€€èƒƒè¢‹ãŒåˆ¥ã®ç©ºé–“ã«ã§ã‚‚ç¹‹ãŒã£ã¦ã‚“ã®ã‹ï¼ï¼Ÿã€',
            'ğŸ“° é™½çœŸã€ç‹‚ä»‹ãƒ¼ï¼ã€€é™å®šã®ãƒ¡ã‚¬ãƒãƒ¼ã‚¬ãƒ¼æ‰‹ã«å…¥ã‚Œã¦ããŸï¼ã€€ä¸€ç·’ã«é£ŸãŠã†ãœï¼ï¼ã€',
            'ğŸ“° æ‰æ‚Ÿã€...è‚‰ã®æ¸›ã‚Šæ–¹ãŒå°‹å¸¸ã˜ã‚ƒãªã„ãªã€‚èª¿ç†å ´ãŒè¿½ã„ã¤ã„ã¦ã„ãªã„ã€',
            'ğŸ“° æ‰æ‚Ÿã€è‚‰ãŒè’é¬¼ç‹‚ä»‹ã«å¸ã„è¾¼ã¾ã‚Œã¦ã„ã...ã€‚è¦‹ã¦ã„ã‚‹ã¨ã€ä¸æ€è­°ã¨æ„Ÿå¿ƒã—ã¦ã—ã¾ã†ãªã€',
            'ğŸ“° ç´«è‹‘ã€è’é¬¼ãã‚“ã¯æœ¬å½“ã«ç¾å‘³ã—ãã†ã«é£Ÿã¹ã¦ãã‚Œã‚‹ã‚ˆã­ã€‚ã¯ã„ã€æ¬¡ã®ä¸€çš¿ã ã‚ˆã€',
            'ğŸ“° ç´«è‹‘ã€ç„¡ç†ã¯ã—ãªãã¦ã„ã„ã‘ã©...ã¾ã ã„ã‘ã‚‹ï¼Ÿã€€ã˜ã‚ƒã‚æ¸©ã‹ã„ã†ã¡ã«ã©ã†ãï¼ã€',
            'ğŸ“° æ…ˆç„ã€ã¯ã...ãŠå‰ã®é£Ÿã„æ–¹ã‚’è¦‹ã¦ã„ã‚‹ã¨ã€ã“ã£ã¡ã®èƒƒã¾ã§é‡ããªã£ã¦ãã‚‹...ã€',
            'ğŸ“° æ…ˆç„ã€ãã‚“ãªã«è©°ã‚è¾¼ã‚“ã§å¤§ä¸ˆå¤«ãªã®ã‹...ï¼Ÿã€€ã¶ã£å€’ã‚Œã¦ã‚‚ä¿ºã¯çŸ¥ã‚‰ãªã„ã‹ã‚‰ãªã€',
            'ğŸ“° ç‚ºå£«ã€...ã¾ãŸè‚‰ã‹ã€',
            'ğŸ“° ç‚ºå£«ã€...ãã®é£Ÿã¹ãŸé‡ã‚’èª‡ã‚Œã‚‹ã¨æ€ã£ã¦ã„ã‚‹ãªã‚‰ã€å®Ÿã«å“€ã‚Œã ãªã€',
            'ğŸ“° ç‚ºå£«ã€è‚‰ã‚’é£Ÿã¹ã‚‹ã ã‘ã§ã“ã†ã‚‚é¨’ãŒã—ã„ã¨ã¯...ã€‚ç›¸å¤‰ã‚ã‚‰ãšæš‘è‹¦ã—ãã¦é¬±é™¶ã—ã„ãƒ¤ãƒ„ã ã€',
            'ğŸ“° ç‚ºå£«ã€...ã‚‚ã†å‹æ‰‹ã«ã—ã‚ã€',
            'ğŸ“° æ¾ä¹‹åŠ©ã€ãã‚“ãªé£Ÿã¹æ–¹ã—ã¦...è…¹ã€å£Šã™ãªã‚ˆï¼Ÿã€',
            'ğŸ“° æ¾ä¹‹åŠ©ã€è‚‰ã°ã£ã‹ã‚Šã˜ã‚ƒç­‹è‚‰ã‚‚æ³£ããã€‚å°‘ã—ã§ã„ã„ã‹ã‚‰é‡èœã‚‚é£Ÿã¹ã‚ã€‚ãªï¼Ÿã€',
            'ğŸ“° æ¾ä¹‹åŠ©ã€ã‚‚ã†ã€è¨˜éŒ²ã¨ã‹ãã†ã„ã†æ¬¡å…ƒã˜ã‚ƒãªã„ãª...ã€',
            'ğŸ“° æ¾ä¹‹åŠ©ã€ä¿ºã®å”æšã’ãŠã«ãã‚Šã‚‚æŒã£ã¦ã„ã‘ï¼ã€€é ‘å¼µã‚Œã‚ˆï¼ã€',
            'ğŸ“° ç‹‚ä»‹ã€ä¿ºãŒè‚‰ã§ã€è‚‰ãŒä¿ºã ï¼ã€',
            'ğŸ“° ç‹‚ä»‹ã€è‚‰ãŒ...è¶³ã‚Šã­ã‡...ã€',
            'ğŸ“° ç‹‚ä»‹ã€...ã‚‚ã£ã¨...ã‚‚ã£ã¨ã ...ã€',
            'ğŸ“° ç‹‚ä»‹ã€ä¿ºã¯è‚‰ã§ã‚‚ï¼‘ç•ªã«ãªã‚‹ç”·ã ãœï¼ï¼ï¼ï¼ï¼ã€',
            'ğŸ“° ãƒ«ãƒ¼ã‚¤ã€æœ‰åãªæ”¾ç½®ã‚²ãƒ¼ã‚’æ€ã„å‡ºã™ãª...ã€‚ã‚ã£ãŸã‚ã€ã‚¯ãƒƒã‚­ãƒ¼ãŒå‹æ‰‹ã«å¢—ãˆã‚‹ã‚„ã¤ã€',
            'ğŸ“° ãƒ«ãƒ¼ã‚¤ã€è¡—ä¸­ã®è‚‰å…¨éƒ¨é£Ÿã†ã¨ã‹...ã„ã‚„ã‚‚ã†å¥½ãã«ã—ã‚ã€‚ä¿ºã¯çŸ¥ã‚‰ã­ã‡ã€',
            'ğŸ“° ãƒ©ãƒ³ã‚¹ã€æ¶ˆè²»é€Ÿåº¦ãŒå¸¸äººã®æ ã‚’è¶…ãˆã¦ã„ã‚‹...ã€‚å½¼ã®èº«ä½“ã®ä»•çµ„ã¿ã‚’è§£ãæ˜ã‹ã—ãŸããªã‚‹ã‚ˆã€',
            'ğŸ“° ãƒ©ãƒ³ã‚¹ã€å›ãŸã¡ã¯æ­¢ã‚ã‚‹ã®ã‹ã„ï¼Ÿã€€åƒ•ã¯ã‚‚ã†å°‘ã—ã ã‘è¦‹ã¦ã„ãŸã„ãªã€',
            'ğŸ“° ï¼±ã€ã¯ã„ã¯ã„ã€ãŠè‚‰ã­...å¥½ãã ã‚ˆã­ã‡ã€ã»ã‚“ã¨ã€',
            'ğŸ“° ï¼±ã€ãŠè‚‰ã ã‘ã£ã¦é£½ããªã„ï¼Ÿã€€ã‚‚ã£ã¨ç”˜ã„ã‚‚ã®ã¨ã‹é£Ÿã¹ãªã‚ˆã€',
            'ğŸ“° é™æµã€ã“ã‚Œã ã‘ç¾å‘³ã—ãã†ã«é£Ÿã¹ã¦ãã‚Œã‚‹ã¨ã€ä½œã£ãŸäººã‚‚å¬‰ã—ã„ã ã‚ã†ãªã€',
            'ğŸ“° é™æµã€ã‚ãƒ¼...è¦‹ã¦ã‚‹ã ã‘ã§ãŠè…¹ã„ã£ã±ã„ã«ãªã£ã¡ã‚ƒã£ãŸã€‚è‹¥ã„ã£ã¦å‡„ã„ã­ã‡ã€',
            'ğŸ“° å®—é›²ã€...ãµã‚€ã€ã“ã‚Œã»ã©æ°—æŒã¡ã‚ˆãé£Ÿã¹ã‚‹å¥´ã‚‚çã—ã„ãªã€',
            'ğŸ“° å®—é›²ã€é£Ÿã¹æ–¹ã«å£å‡ºã—ã™ã‚‹ã¤ã‚‚ã‚Šã¯ãªã„ã€‚ã ãŒã€ã€Œã»ã©ã»ã©ã€ã¨ã„ã†è¨€è‘‰ãŒã‚ã‚‹ã“ã¨ã¯è¦šãˆã¦ãŠã‘ã€',
            'ğŸ“° é¢¯ã€ãˆã£ï¼Ÿï¼ã€€ã“ã‚Œå…¨éƒ¨ç‹‚ä»‹ãŒé£Ÿã¹ãŸã®ï¼Ÿï¼ã€€ã™ã”ã£ï¼ï¼ã€',
            'ğŸ“° é¢¯ã€å¤§ç››ã‚Šå®Œé£Ÿãƒãƒ£ãƒ¬ãƒ³ã‚¸ã¨ã‹è¡Œã£ãŸã‚‰ã•ã€çµ¶å¯¾å„ªå‹ã§ãã‚‹ã˜ã‚ƒã‚“ã€‚ä»Šåº¦èª˜ã£ã¦ã¿ã‚ˆã†ã‹ãªã€',
            'ğŸ“° çš‡ç´€ã€é¸ã¶è‚‰ãŒé›‘ãªã‚‰ã€å‡ºæ¥ã‚‹ç­‹ã‚‚é›‘ã«ãªã‚‹ã€',
            'ğŸ“° çš‡ç´€ã€...è‰¯ã„é£Ÿã„ã£ã·ã‚Šã ã€',
            'ğŸ“° æµ„ã€è‚‰ã§ç„¡é‚ªæ°—ã«å–œã¹ã‚‹ã®ã¯ã€ã¾ã è‹¥ã„è¨¼æ‹ ã ãªã€‚ä¿ºã¯ä¿ºã§ã€ç”˜å‘³ã®ä¸–ç•Œã«æµ¸ã‚‰ã›ã¦ã‚‚ã‚‰ã†ã¨ã™ã‚‹ã‚ˆã€',
            'ğŸ“° æµ„ã€ãƒ¬ãƒ‡ã‚£ãŸã¡ã®é–“ã§è‚‰æ–™ç†ãŒæµè¡Œã‚Šå§‹ã‚ã¦ã„ã‚‹ã®ã‹ã€‚...å›°ã£ãŸãªã€',
            'ğŸ“° æˆ´å¤©ã€ç‡ƒæ–™åŠ¹ç‡ãŒç•°å¸¸ã«é«˜ã„ã®ã§ã—ã‚‡ã†ã‹...ã€‚å½¼ã®èº«ä½“ã‚’èª¿ã¹ã‚Œã°èˆˆå‘³æ·±ã„ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚Œãã†ã§ã™ã­ã€',
            'ğŸ“° æˆ´å¤©ã€ã“ã®å®Œé£Ÿã¶ã‚Šã€ã¾ã•ã—ãé©šå˜†ç§°è³›ã«å€¤ã™ã‚‹æ°—è¿«ã§ã™ã­...ã€',
            'ğŸ“° é›¨ç«œã€ã“ã®é‡ã‚’ï¼‘äººã§...ï¼Ÿã€€ã¾ã•ã‹ã“ã“ã¾ã§ã¨ã¯...åœ§å·»ã§ã™ã€',
            'ğŸ“° é›¨ç«œã€è’é¬¼ã•ã‚“ã®é£Ÿäº‹ã®å‹¢ã„ã«ã¯ã€ã„ã¤ã‚‚é©šã‹ã•ã‚Œã¾ã™ã€‚æ°´ã‚‚å¿˜ã‚Œãšã«é£²ã‚“ã§ãã ã•ã„ã­ã€',
            'ğŸ“° é§†ã€ã“ã‚Œã ã‘éœ€è¦ãŒã‚ã‚‹ãªã‚‰ã€è‚‰ã®ç›¸å ´ã¾ã§å‹•ããã†ã ãª...ã€‚ä»Šã®ã†ã¡ã«æ–°ã—ã„å•†å“ã§ã‚‚è€ƒãˆã¦ãŠãã‹ã€',
            'ğŸ“° é§†ã€ã†ã¡ã®ãƒ•ãƒ©ãƒªã‚ªã§ã‚‚ã‚ãã“ã¾ã§ã¯é£Ÿã‚ã­ã‡ã‚ˆã€‚ãƒ‘ãƒ¼ãƒã®ãƒ¤ãƒ„ã€é£Ÿè²»ã¨ã‹ã©ã†å›ã—ã¦ã‚“ã ï¼Ÿã€',
            'ğŸ“°ãƒ•ãƒ©ãƒªã‚ªã€ã¡ã‚‡ã€å¾…ã¦å¾…ã¦ï¼ã€€ãã‚Œé³¥ã˜ã‚ƒã­ãƒ¼ã‚ˆãªï¼Ÿï¼ã€€...ã†ã€ç‰›ã‹ã€‚ãƒã‚¸ã§å‹˜å¼ã—ã¦ãã‚Œ...ã€',
            'ğŸ“°ãƒ•ãƒ©ãƒªã‚ªã€ã„ã‚„ã„ã‚„ã€ã‚ªãƒã‚¨ã®èƒƒè¢‹ã©ã†ãªã£ã¦ã‚“ã ã‚ˆï¼ã€€......ä¿ºã‚‚ã²ã‚‡ã£ã¨ã™ã‚‹ã€ã¨ã„ã‘ã‚“ã®ã‹...ï¼Ÿã€',
            'ğŸ“°ãƒ¬ã‚ªãƒ³ã€ãŠãŠã£ã¨ã€ã¾ã ãŠå¬ã—ä¸ŠãŒã‚Šã§ã™ã­ï¼Ÿï¼ã€€æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸï¼ï¼ã€€æ¬¡ã®ä¸€çš¿ã‚‚ã€æœ€é«˜ã®ä¸€å“ã‚’å…¨åŠ›ã§ãŠå±Šã‘ã„ãŸã—ã¾ã™ã‚ˆï¼ï¼ã€',
            'ğŸ“°ãƒ¬ã‚ªãƒ³ã€ã“ã®ã‚ˆã†ã«æ°—æŒã¡ã‚ˆãå¬ã—ä¸ŠãŒã£ã¦ã„ãŸã ã‘ã‚‹ã¨ã¯ã€æ„Ÿæ¿€ã§ã”ã–ã„ã¾ã™ï¼ï¼ã€€ç§ã‚‚ä¸€å±¤ã€è…•ãŒé³´ã‚Šã¾ã™ï¼ï¼ã€',
            'ğŸ“° è‚‰å±‹ã€åœ¨åº«ãŒ......åœ¨åº«ãŒè¶³ã‚Šãªã„ï¼ï¼ã€',
            'ğŸ“° è‚‰å±‹ã€ã ã€ã ã‚ã ......è£œå……ãŒè¿½ã„ã¤ã‹ã‚“ï¼ï¼ã€',
            'ğŸ“° è‚‰å±‹ã€åº—é•·ï¼ï¼ã€€ç‰›ã‚‚è±šã‚‚é¶ã‚‚å…¨éƒ¨ã‚ã‚Šã¾ã›ã‚“ï¼ï¼ã€',
            'ğŸ“° è‚‰å±‹ã€åº—é•·ï¼ï¼ã€€ã‚‚ã†å“å‡ºã—ã™ã‚‹è‚‰ãŒç„¡ã„ã§ã™ï¼ï¼ã€',
            'ğŸ“° ãƒ¬ã‚ªãƒ³ã€ã‚«ãƒ¬ãƒ¼ã®ä»•è¾¼ã¿ä¸­',
            'ğŸ“° ãƒ¬ã‚ªãƒ³ã€ç‰¹è£½ã‚«ãƒ¬ãƒ¼ã®åœ¨åº«ã‚¼ãƒ­ã«æ€ã‚ãšæ¶™',
            'ğŸ“° ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ç‹‚ä»‹ã®èƒƒè¢‹å®¹é‡ã‚’èª¿æŸ»ä¸­',
            'ğŸ“° ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ç‹‚ä»‹ã®èƒƒè¢‹ã‚¹ã‚­ãƒ£ãƒ³ã‚’è©¦ã¿ã‚‹ã‚‚ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ãŒéç†±ã—ã¦çˆ†æ•£',
            'ğŸ“° è„³æ³¢æ¸¬å®šã®çµæœ:ã€è‚‰ã€ã®æ–‡å­—ã§é«˜åå¿œ',
            'ğŸ“° ç‹‚ä»‹ã®è‚‰ãƒˆãƒ¬ã€ä»Šæ—¥ã‚‚çµ¶å¥½èª¿',
            'ğŸ“° ç‹‚ä»‹ã€ã¤ã„ã«è‚‰ã¨ä¼šè©±ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ï¼Ÿï¼',
            'ğŸ“° è’é¬¼ç‹‚ä»‹ã€ä¸€ä½“ã„ã¤ã¾ã§é£Ÿã¹ç¶šã‘ã‚‹ã®ã‹',
            'ğŸ“° è‚‰é£Ÿã®ç¥ã€è’é¬¼ç‹‚ä»‹ã€€é™ã€€è‡¨ã€€',
            'ğŸ“° ç›®æ’ƒæƒ…å ±:è™¹é¡”å¸‚ã«ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³è‚‰ã‚«ãƒ¬ãƒ¼ãŒå‡ºç¾',
            'ğŸ“° è‚‰æ¥­ç•Œã€ä¾›çµ¦ãƒ©ã‚¤ãƒ³ã‚’ç‹‚ä»‹ä¸€äººã«ç‰¹åŒ–ã¸',
            'ğŸ“° è‚‰å¸‚å ´ã€ç‹‚ä»‹å°‚ç”¨ãƒ¬ãƒ¼ãƒ³ã‚’æ­£å¼ã«è¨­ç½®ã¸',
            'ğŸ“° è™¹é¡”å¸‚ã€è‚‰æ¶ˆè²»é‡ãŒå›½å®¶çµ±è¨ˆã‚’è¶…ãˆç·Šæ€¥ä¼šè­°ã¸çªå…¥',
            'ğŸ“° æ™‚ç©ºç®¡ç†å±€ã€å½¼ã®é£Ÿæ¬²ã¯å®‡å®™ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ã€',
            'ğŸ“° æ™‚ç©ºç®¡ç†å±€ã€ç‹‚ä»‹ã®é£Ÿæ¬²ãŒç•°èƒ½åå¿œå€¤ã‚’æ›´æ–°ã—ãŸã€ã¨ç™ºè¡¨',
            'ğŸ“° æ™‚ç©ºç®¡ç†å±€ã€ç‹‚ä»‹ã®èƒƒè¢‹ã«â€œåˆ¥æ¬¡å…ƒã®å…¥å£â€ãŒã‚ã‚‹å¯èƒ½æ€§ã€ã¨ç™ºè¡¨',
            'ğŸ“° ä»Šå¤œã¯è‚‰ç¥­ã‚Šé–‹å‚¬æ±ºå®šï¼',
            'ğŸ“° çš‡ç´€ã€ç‹‚ä»‹ã®é£Ÿæ¬²ã«æ€ã‚ãšé©šæ„•ã®è¡¨æƒ…',
            'ğŸ“° ç‚ºå£«ã€è‚‰ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å‘†ã‚Œé¡”ã§è¦‹ã¤ã‚ã‚‹',
            'ğŸ“° ç‚ºå£«ã€è‚‰ã®åŒ‚ã„ã«å«Œæ°—ãŒå·®ã—ã¦éƒ¨å±‹ã‚’é€€å‡º',
            'ğŸ“° æ¾ä¹‹åŠ©ã€èª¿ç†ã«è¿½ã‚ã‚Œã¦çœ ã‚Œãš',
            'ğŸ“° æ¾ä¹‹åŠ©ã€å¾¹å¤œæ˜ã‘ã§ãªãŠç‹‚ä»‹ã®è¿½åŠ æ³¨æ–‡ã«å¯¾å¿œ',
            'ğŸ“° å¸‚å ´ã€ä»Šæ—¥ã‚‚å“è–„ã€‚åŸå› ã¯ã‚‚ã¡ã‚ã‚“"ã‚¢ãƒç”·"',
            'ğŸ“° è¡—ä¸­ã§èã“ãˆã‚‹ã€ã‚‚ã£ã¨è‚‰ã‚’ãã‚Œï¼ã€ã®å«ã³',
            'ğŸ“° é›¨ç«œã€ç‹‚ä»‹ã®å¤§é£Ÿã„è¨˜éŒ²ã‚’ä¸å¯§ã«ãƒ‡ãƒ¼ã‚¿åŒ–',
            'ğŸ“° å¸‚æ°‘ã€æœã‹ã‚‰è‚‰ã®åŒ‚ã„ã—ã‹ã—ãªã„ã€ã¨è‹¦æƒ…æ®ºåˆ°',
            'ğŸ“° å¸‚å ´é–¢ä¿‚è€…ã€è‚‰ã‚³ãƒ¼ãƒŠãƒ¼ã¯å¹»ã§ã™ã€ã¨åº—å†…æ”¾é€ã§è¬ç½ª',
            'ğŸ“° è™¹é¡”å¸‚ã€è‚‰ä¸è¶³ã§â€œé‡èœã®æ—¥â€ã¸å¼·åˆ¶ç§»è¡Œã‚’æ¤œè¨',
            'ğŸ“° è·¯ä¸Šã§è¬ã®è‚‰ç‰‡ãŒç™ºè¦‹ã•ã‚Œã‚‹ã€‚ã€€å°‚é–€å®¶ã€ã“ã‚Œã¯ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³è‚‰ã‚«ãƒ¬ãƒ¼ã®æ¬ ç‰‡ã‹ã‚‚ã€',
            'ğŸ“° å­ã©ã‚‚ãŸã¡ã®é–“ã§åºƒãŒã‚‹ã€è‚‰ã‚’ç„¡é™ã«é£Ÿã¹ã‚‹ç”·ã€ã®ã‚¦ãƒ¯ã‚µ',
            'ğŸ“° å¸‚å†…å„æ‰€ã§è‚‰ä¸è¶³ã®å£°ç›¸æ¬¡ãã€‚ç©ºå‰ã®è‚‰ãƒ–ãƒ¼ãƒ ã€åˆ°æ¥ã‹ï¼ï¼Ÿã€€å¸‚å ´ãƒ»å¸‚æ°‘ã¨ã‚‚ã«æ··ä¹±åºƒãŒã‚‹'
        ];


            const MAX_CLICK_LEVEL = 20;

        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let gameState = {
            meat: 0,
            totalMeatEarned: 0,
            totalClicks: 0,
            rawClicks: 0,
            clickLevel: 0,  
            upgrades: upgrades.map(u => ({ ...u, count: 0 })),
            unlockedUpgrades: [0],
            unlockedRecipes: [],
            achievementLog: [],
            achievements: new Array(achievements.length).fill(false),
            goldenCurryClicks: 0,
            offlineMaxTime: 0,
            speedRun5min: false,
            rocketStart: false,
            orderMaster: false,
            clicksInTenSeconds: 0,
            feverMode: false,
            feverEndTime: 0,
            clickBoost: false,
            clickBoostEndTime: 0,
            autoClickMode: false,
            autoClickEndTime: 0,
            lastSave: Date.now(),
            startTime: Date.now()
        };

        let clickCounter = 0;
        let clickCounterTimeout = null;
        let autoClickInterval = null;

        // åˆæœŸåŒ–
        function init() {
    loadGame();


// ============================
    // ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰è¨­å®šã®å¾©å…ƒ
    // ============================
    const savedSound = localStorage.getItem("soundEnabled");
    if (savedSound !== null) {
        soundEnabled = savedSound === "true";
    }
    updateSoundIcon();
    // ============================

    renderUpgrades();
    updateDisplay();
    startAutoProduction();

    startNewsTicker();
    checkGoldenCurry();

    setTimeout(() => {
        if (gameState.totalMeatEarned >= 100 && !gameState.rocketStart) {
            gameState.rocketStart = true;
            checkAchievements();
        }
    }, 60000);

    setTimeout(() => {
        if (gameState.totalMeatEarned >= 1000 && !gameState.speedRun5min) {
            gameState.speedRun5min = true;
            checkAchievements();
        }
    }, 300000);
}
        // è‚‰ã‚¯ãƒªãƒƒã‚¯
function clickMeat(event) {
const base = getClickValue();
const power = gameState.clickBoost ? base * 7 : base;
    gameState.meat += power;
    gameState.totalMeatEarned += power;
gameState.rawClicks += 1;
gameState.totalClicks += getClickValue();

    
// ç”»åƒåˆ‡ã‚Šæ›¿ãˆå‡¦ç†ï¼ˆ3ã‚³ãƒï¼‰
const img = document.getElementById("meatImage");

// â‘  
img.src = kyosukeHalf;

// â‘¡
setTimeout(() => {
    img.src = kyosuke2;
}, 150);

// â‘¢
setTimeout(() => {
    img.src = kyosuke1;

    img.classList.remove("kyosuke-glow");
    void img.offsetWidth;
    img.classList.add("kyosuke-glow");
}, 300);  // â† å…¨ä½“ã§0.22ç§’ãã‚‰ã„ã«ä¼¸ã°ã™


    // 10ç§’é–“ã®ã‚¯ãƒªãƒƒã‚¯æ•°ã‚«ã‚¦ãƒ³ãƒˆ
    clickCounter++;
    if (clickCounterTimeout) clearTimeout(clickCounterTimeout);
    clickCounterTimeout = setTimeout(() => {
        if (clickCounter > gameState.clicksInTenSeconds) {
            gameState.clicksInTenSeconds = clickCounter;
        }
        clickCounter = 0;
    }, 10000);

    // ===== ã“ã“ã‹ã‚‰ï¼šã‚¯ãƒªãƒƒã‚¯ï¼ã‚¿ãƒƒãƒ—ä½ç½®ã®è¨ˆç®— =====
    let xPercent = 50;
    let yPercent = 50;

    try {
        const effectsContainer = document.getElementById('clickEffects');
        if (effectsContainer && event) {
            const rect = effectsContainer.getBoundingClientRect();

            let clientX = null;
            let clientY = null;

            // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ï¼ˆã‚¹ãƒãƒ›ï¼‰å‘ã‘
            if (event.touches && event.touches[0]) {
                clientX = event.touches[0].clientX;
                clientY = event.touches[0].clientY;
            }
            // ãƒã‚¦ã‚¹ã‚¯ãƒªãƒƒã‚¯ãƒ»é€šå¸¸ã® click ã‚¤ãƒ™ãƒ³ãƒˆ
            else if (event.clientX != null && event.clientY != null) {
                clientX = event.clientX;
                clientY = event.clientY;
            }

            if (clientX != null && clientY != null) {
                xPercent = ((clientX - rect.left) / rect.width) * 100;
                yPercent = ((clientY - rect.top) / rect.height) * 100;

                // ã¯ã¿å‡ºã—é˜²æ­¢ï¼ˆ0ã€œ100%ã«ã‚¯ãƒ©ãƒ³ãƒ—ï¼‰
                xPercent = Math.max(0, Math.min(100, xPercent));
                yPercent = Math.max(0, Math.min(100, yPercent));
            }
        }
    } catch (e) {
        // ä½•ã‹ã‚ã£ã¦ã‚‚ã‚²ãƒ¼ãƒ ãŒæ­¢ã¾ã‚‰ãªã„ã‚ˆã†ã«
        console.warn('click position calc failed:', e);
    }

    showClickEffect(power, xPercent, yPercent);
    // ===== ã“ã“ã¾ã§ï¼šä½ç½®è¨ˆç®— =====

    showDialogue();
    updateDisplay();
    checkUpgradeUnlocks();
    checkRecipes();
    checkAchievements();

    playMeatClickSound();
}

        // ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¡¨ç¤º
// xPercent / yPercent ã¯ 0ã€œ100 ã®å‰²åˆï¼ˆæœªæŒ‡å®šãªã‚‰ä¸­å¤®ï¼‰
function showClickEffect(power, xPercent = 50, yPercent = 50) {
    const container = document.getElementById('clickEffects');
    if (!container) return;

    const effect = document.createElement('div');

    const isCritical = Math.random() < 0.1;
    const displayPower = isCritical ? power * 10 : power;

    effect.textContent = isCritical
        ? `ğŸ– +${Math.floor(displayPower)}`
        : `ğŸ¥© +${Math.floor(power)}`;

    effect.className = `click-effect ${isCritical ? 'critical' : 'normal'}`;

    // ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã§é…ç½®ï¼ˆã‚¯ãƒªãƒƒã‚¯ä½ç½®ã‹ã‚‰å‡ºã‚‹ï¼‰
    effect.style.left = xPercent + '%';
    effect.style.top = yPercent + '%';

    container.appendChild(effect);

    setTimeout(() => effect.remove(), 1000);
}

        // ãƒ©ãƒ³ãƒ€ãƒ ã‚»ãƒªãƒ•è¡¨ç¤º
        function showRandomDialogue() {
            const rand = Math.random();
            let selectedDialogue;
            
            if (rand < 0.02) {
                selectedDialogue = dialogues.filter(d => d.rarity === 'super-rare')[Math.floor(Math.random() * 2)];
            } else if (rand < 0.1) {
                selectedDialogue = dialogues.filter(d => d.rarity === 'rare')[Math.floor(Math.random() * 2)];
            } else {
                selectedDialogue = dialogues.filter(d => d.rarity === 'normal')[Math.floor(Math.random() * 11)];
            }
            
            const bubble = document.getElementById('speechBubble');
            bubble.textContent = selectedDialogue.text;
            bubble.className = 'speech-bubble ' + selectedDialogue.rarity;
            if (gameState.feverMode && Date.now() < gameState.feverEndTime) {
                bubble.classList.add('fever');
            }
            
            gameState.heardDialogues.add(selectedDialogue.text);
        }


const kyosuke1 = "images/kyosuke1.png";
const kyosukeHalf = "images/kyosuke2.png";
const kyosuke2 = "images/kyosuke3.png";

    
        // ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è³¼å…¥
function buyUpgrade(index) {
    const upgrade = gameState.upgrades[index];
    const cost = Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.count));

    if (gameState.meat < cost) return;

    gameState.meat -= cost;
    upgrade.count++;

gameState.orderLog.push(upgrades[index].id); 

console.log("pushed =", gameState.orderLog.at(-1), "expected id =", upgrades[index].id, "index =", index);


    checkOrderMaster();

    playUpgradeBuySound();
    renderUpgrades();
    updateDisplay();
    saveGame(true);
}

// â˜…é †ç•ªå®Ÿç¸¾ãƒã‚§ãƒƒã‚¯
function checkOrderMaster() {
const target = [3, 4, 6, 7, 8];
const recent = gameState.orderLog.slice(-5);
    if (JSON.stringify(recent) === JSON.stringify(target)) {
        gameState.orderMaster = true;
        checkAchievements();
    }
}

        // è¡¨ç¤ºæ›´æ–°
        function updateDisplay() {
            document.getElementById('meatCount').textContent = formatNumber(Math.floor(gameState.meat));
            document.getElementById('perSecond').textContent = calculateProductionRate().toFixed(1);
            document.getElementById('totalClicks').textContent = formatNumber(gameState.totalClicks);
            const clickLevelTextEl = document.getElementById('clickLevelText');
                        document.getElementById('totalMeat').textContent = formatNumber(Math.floor(gameState.totalMeatEarned));
            document.getElementById('unlockedRecipes').textContent = `${gameState.unlockedRecipes.length}/20`;
            document.getElementById('unlockedAchievements').textContent =
            `${gameState.achievements.filter(a => a).length}/${achievements.length}`;
            
            const statusPanel = document.getElementById('statusPanel');
            const meatButton = document.getElementById('meatButton');
            const speechBubble = document.getElementById('speechBubble');
            const clickPowerPcEl = document.getElementById('clickPowerPc');
            if (clickPowerPcEl) clickPowerPcEl.textContent = getClickValue();
            const clickPowerSpEl = document.getElementById('clickPowerSp');
            if (clickPowerSpEl) clickPowerSpEl.textContent = getClickValue();
          const clickNextCostEl = document.getElementById('clickNextCost');
const clickUpgradeBtn = document.getElementById('clickUpgradeButton');
            

if (gameState.clickLevel >= MAX_CLICK_LEVEL) {
    if (clickLevelTextEl) clickLevelTextEl.textContent = 'MAX';
    if (clickNextCostEl)  clickNextCostEl.textContent  = '-';

    if (clickUpgradeBtn) {
        clickUpgradeBtn.disabled = true;
        clickUpgradeBtn.classList.add('click-upgrade-disabled');
        clickUpgradeBtn.textContent = 'ãƒ¬ãƒ™ãƒ«ï¼­ï¼¡ï¼¸';
    }
} else {
    if (clickLevelTextEl) clickLevelTextEl.textContent = gameState.clickLevel;
    if (clickNextCostEl)  clickNextCostEl.textContent  = formatNumber(getClickUpgradeCost());

    if (clickUpgradeBtn) {
        clickUpgradeBtn.disabled = false;
        clickUpgradeBtn.classList.remove('click-upgrade-disabled');
        clickUpgradeBtn.textContent = 'è‚‰ãƒˆãƒ¬ã‚’ã™ã‚‹ï¼';
    }
}



            if (gameState.feverMode && Date.now() < gameState.feverEndTime) {
                statusPanel.classList.add('fever');
                speechBubble.classList.add('fever');
            } else {
                statusPanel.classList.remove('fever');
                speechBubble.classList.remove('fever');
                gameState.feverMode = false;
            }
            
            if (gameState.clickBoost && Date.now() < gameState.clickBoostEndTime) {
                meatButton.classList.add('click-boost');
            } else {
                meatButton.classList.remove('click-boost');
                gameState.clickBoost = false;
            }
        }

        // ç”Ÿç”£ãƒ¬ãƒ¼ãƒˆè¨ˆç®—
        function calculateProductionRate() {
            let rate = 0;
            const multiplier = gameState.feverMode && Date.now() < gameState.feverEndTime ? 3 : 1;
            gameState.upgrades.forEach(upgrade => {
                rate += upgrade.baseProduction * upgrade.count;
            });
            return rate * multiplier;
        }

        // è‡ªå‹•ç”Ÿç”£
        function startAutoProduction() {
            setInterval(() => {
                const production = calculateProductionRate() / 10;
                gameState.meat += production;
                gameState.totalMeatEarned += production;
                
                updateDisplay();
                checkUpgradeUnlocks();
                checkRecipes();
                checkAchievements();
            }, 100);
        }

        // æ”¯æ´è€…è§£æ”¾ãƒã‚§ãƒƒã‚¯
        function checkUpgradeUnlocks() {
            gameState.upgrades.forEach((upgrade, index) => {
                if (!gameState.unlockedUpgrades.includes(index) && 
                    upgrade.unlockCondition && 
                    typeof upgrade.unlockCondition === 'function' && 
                    upgrade.unlockCondition()) {
                    gameState.unlockedUpgrades.push(index);
                    showUpgradeUnlock(upgrade);
                }
            });
        }

// æ”¯æ´è€…è§£æ”¾æ¼”å‡º
function showUpgradeUnlock(upgrade) {
    const modal = document.getElementById('unlockModal');

    // ã‚¢ã‚¤ã‚³ãƒ³ãƒ»èª¬æ˜ã‚»ãƒƒãƒˆ
    document.getElementById('unlockIcon').innerHTML =
        `<img src="${upgrade.icon}" alt="${upgrade.name}" class="unlock-icon-img">`;
    document.getElementById('unlockName').textContent = upgrade.name;
    document.getElementById('unlockDescription').textContent = upgrade.description;
    document.getElementById('unlockStats').innerHTML = `
        ğŸ’° åˆæœŸã‚³ã‚¹ãƒˆ: ${formatNumber(upgrade.baseCost)} è‚‰<br>
        ğŸ“ˆ ç”Ÿç”£é‡: ${upgrade.baseProduction}/ç§’
    `;

    // â˜… ã‚­ãƒ©ã‚­ãƒ©ç”¨ã‚³ãƒ³ãƒ†ãƒŠï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã® <div id="particles">ï¼‰
    const particlesContainer = document.getElementById('particles');
    if (particlesContainer) {
        // å‰å›åˆ†ã‚’ãƒªã‚»ãƒƒãƒˆ
        particlesContainer.innerHTML = '';

        const isMobile = window.innerWidth <= 768;
        const particleCount = isMobile ? 16 : 40;
        const EMOJIS = ['ğŸ’«', 'ğŸŒŸ', 'â­ï¸', 'ğŸ‰', 'ğŸ–', 'ğŸ¥©'];

        for (let i = 0; i < particleCount; i++) {
            const span = document.createElement('span');
            span.className = 'particle-emoji';
            span.textContent = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
            span.style.left = `${Math.random() * 100}%`;
            span.style.top  = `${Math.random() * 100}%`;
            // ãƒ©ãƒ³ãƒ€ãƒ æ–¹å‘ & è·é›¢
            const angle = Math.random() * Math.PI * 2;
            const distance = (isMobile ? 160 : 260) + Math.random() * (isMobile ? 200 : 360);       
            const dx = Math.cos(angle) * distance;
            const dy = Math.sin(angle) * distance;

            span.style.setProperty('--dx', `${dx}px`);
            span.style.setProperty('--dy', `${dy}px`);

            // å¤§ãã•ã¨æ™‚é–“å·®
            span.style.fontSize = `${18 + Math.random() * 10}px`;
            span.style.animationDelay = `${Math.random() * 0.2}s`;

            particlesContainer.appendChild(span);

            // ã‚¢ãƒ‹ãƒ¡çµ‚ã‚ã£ãŸã‚‰å‰Šé™¤
            span.addEventListener('animationend', () => {
                span.remove();
            });
        }
    }

    // ã‚µã‚¦ãƒ³ãƒ‰
    ensureAudio();
    playUpgradeUnlockSound();

    // ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
    modal.classList.add('active');
}
        // æ”¯æ´è€…è§£æ”¾ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeUnlockModal() {
            document.getElementById('unlockModal').classList.remove('active');
            renderUpgrades();
        }

        // æ–™ç†ãƒã‚§ãƒƒã‚¯
        function checkRecipes() {
            recipes.forEach(recipe => {
                if (gameState.totalMeatEarned >= recipe.requirement && !gameState.unlockedRecipes.includes(recipe.id)) {
                    gameState.unlockedRecipes.push(recipe.id);
                    showNotification(`ğŸ½ï¸ æ–°ã—ã„æ–™ç†è§£æ”¾ï¼\n${recipe.name}`);
                    saveGame(true);
                }
            });
// ğŸ‰ æ–™ç†å…¨20ç¨®ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
    if (gameState.unlockedRecipes.length === 20 && !gameState.recipeCompleteShown) {
        gameState.recipeCompleteShown = true;
        showRecipeCompleteModal();
    }
}
// ğŸ‰ å®Ÿç¸¾å…¨21ç¨®ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
const totalUnlocked = gameState.achievements.filter(a => a).length;

if (totalUnlocked >= 21 && !gameState.achievementCompleteShown) {
    gameState.achievementCompleteShown = true;
    showAchievementCompleteModal();
}

        // å®Ÿç¸¾ãƒã‚§ãƒƒã‚¯
function checkAchievements() {
  achievements.forEach((achievement, index) => {
    if (!gameState.achievements[index] && achievement.condition()) {
      gameState.achievements[index] = true;

      const achId = achievement.id ?? (index + 1);
      const already = (gameState.achievementLog || []).some(x => x.id === achId);
      if (!already) {
        gameState.achievementLog.push({
          time: Date.now(),
          id: achId,
          name: achievement.name,
          icon: achievement.icon
        });
      }

      showNotification(`ğŸ– ç§°å·ã‚’ç²å¾—ã—ã¾ã—ãŸï¼\n${achievement.icon} ${achievement.name}`);
      saveGame(true);
    }
  });

//å®Ÿç¸¾ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆåˆ¤å®š
    const unlocked = gameState.achievements.filter(a => a).length;

    if (unlocked >= 21 && !gameState.achievementCompleteShown) {
        gameState.achievementCompleteShown = true;
        showAchievementCompleteModal(); //
    }
        }

        // ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚«ãƒ¬ãƒ¼
        function checkGoldenCurry() {
            setInterval(() => {
                if (Math.random() < 0.02) {
                    spawnGoldenCurry();
                }
            }, 45000);
        }

        function spawnGoldenCurry() {
            const curry = document.createElement('div');
            curry.className = 'golden-curry';
            curry.textContent = 'ğŸ›';
            curry.onclick = () => activateGoldenCurry(curry);
            document.body.appendChild(curry);
            
            setTimeout(() => {
                if (curry.parentNode) {
                    curry.remove();
                }
            }, 10000);
        }

        // ã‚ªãƒ¼ãƒˆã‚¯ãƒªãƒƒã‚¯é–‹å§‹
        function startAutoClick() {
            if (autoClickInterval) {
                clearInterval(autoClickInterval);
            }
            
            gameState.autoClickMode = true;
            gameState.autoClickEndTime = Date.now() + 10000;
            
            autoClickInterval = setInterval(() => {
                if (Date.now() < gameState.autoClickEndTime) {
                    clickMeat({ clientX: window.innerWidth / 2, clientY: window.innerHeight / 2 });
                } else {
                    clearInterval(autoClickInterval);
                    gameState.autoClickMode = false;
                }
            }, 333);
        }

        // é»„é‡‘è‚‰è½ä¸‹æ¼”å‡º
function spawnGoldenMeatRain(options = { countMultiplier: 1, valueMultiplier: 1 }) {
    const count = 15 * (options.countMultiplier || 1);
    const value = 5 * (options.valueMultiplier || 1);

    for (let i = 0; i < count; i++) {
        setTimeout(() => {
            const meat = document.createElement('div');
            meat.className = 'golden-meat-rain';
            meat.textContent = 'ğŸ¥©';
            meat.style.left = Math.random() * 100 + '%';
            meat.style.top = '-50px';
            meat.style.animationDelay = Math.random() * 0.5 + 's';
            document.body.appendChild(meat);

            gameState.meat += value;
            gameState.totalMeatEarned += value;

            setTimeout(() => meat.remove(), 2000);
        }, i * 100);
    }
}

function activateGoldenCurry(element) {
    element.remove();
    gameState.goldenCurryClicks++;

    const effects = [

        { name: 'ğŸ”¥ è‚‰ãƒ•ã‚£ãƒ¼ãƒãƒ¼', action: () => {
            gameState.feverMode = true;
            gameState.feverMultiplier = 4;
            gameState.feverEndTime = Date.now() + 45000;

            showNotification('ğŸ”¥ è‚‰ãƒ•ã‚£ãƒ¼ãƒãƒ¼ç™ºå‹•ï¼\n45ç§’é–“ã€ç”Ÿç”£é‡ 4å€ï¼');
            showSpecialEffect('ğŸ’¥ MEAT FEVER x4!', 'fever');
        }},

        { name: 'ğŸ‘† ã‚¯ãƒªãƒƒã‚¯ãƒ–ãƒ¼ã‚¹ãƒˆ', action: () => {
            gameState.clickBoost = true;
            gameState.clickBoostMultiplier = 7;
            gameState.clickBoostEndTime = Date.now() + 30000;

            showNotification('ğŸ‘† ã‚¯ãƒªãƒƒã‚¯ãƒ–ãƒ¼ã‚¹ãƒˆç™ºå‹•ï¼\n30ç§’é–“ã€ã‚¯ãƒªãƒƒã‚¯ 7å€ï¼');
            showSpecialEffect('âš¡ CLICK x7!', 'fever');
        }},

        { name: 'ğŸ¤– ã‚ªãƒ¼ãƒˆã‚¯ãƒªãƒƒã‚¯', action: () => {
            gameState.autoClickDuration = 15000;
            gameState.autoClickSpeed = 2;

            startAutoClick();

            showNotification('ğŸ¤– ã‚ªãƒ¼ãƒˆã‚¯ãƒªãƒƒã‚¯ç™ºå‹•ï¼\n15ç§’é–“ã€é«˜é€Ÿè‡ªå‹•ã‚¯ãƒªãƒƒã‚¯ï¼');
            showSpecialEffect('ğŸ¤– AUTO CLICK x2!', 'boost');
        }},

        { name: 'âœ¨ é»„é‡‘è‚‰è½ä¸‹', action: () => {
            spawnGoldenMeatRain({
                countMultiplier: 2,
                valueMultiplier: 1.3,
            });

            showNotification('âœ¨ é»„é‡‘è‚‰è½ä¸‹ï¼\nç©ºã‹ã‚‰è‚‰ãŒå¤§é‡ã«é™ã£ã¦ããŸï¼');
            showSpecialEffect('âœ¨ GOLDEN RAIN++', 'boost');
        }},

        { name: 'ğŸ’° è‚‰ãƒœãƒ¼ãƒŠã‚¹', action: () => {
            const bonusRate = 0.10 + Math.random() * 0.10; 
            // 10%ã€œ20%ã«å¼·åŒ–

            const bonus = Math.floor(gameState.meat * bonusRate);

            gameState.meat += bonus;
            gameState.totalMeatEarned += bonus;

            showNotification(`ğŸ’° è‚‰ãƒœãƒ¼ãƒŠã‚¹ï¼\n${formatNumber(bonus)} å€‹ã®è‚‰ã‚’ç²å¾—ï¼`);
            showSpecialEffect(`ğŸ’° +${formatNumber(bonus)}`, 'boost');
        }}
    ];

    // ãƒ©ãƒ³ãƒ€ãƒ ã«ä¸€ã¤ç™ºå‹•
    const effect = effects[Math.floor(Math.random() * effects.length)];
    effect.action();

    updateDisplay();
    checkAchievements();
    saveGame(true);
}


        // ç‰¹æ®Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¡¨ç¤º(ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚«ãƒ¬ãƒ¼ç”¨)
        function showSpecialEffect(text, type) {
            const container = document.getElementById('clickEffects');
            const effect = document.createElement('div');
            
            effect.textContent = text;
            effect.className = `click-effect ${type}`;
            effect.style.left = '50%';
            effect.style.top = '50%';
            
            container.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 1500);
        }

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚«ãƒ¼
        function startNewsTicker() {
    const newsElement = document.getElementById('news');

    function updateNews() {
        const randomIndex = Math.floor(Math.random() * newsMessages.length);
        let message = newsMessages[randomIndex];
        if (message.includes('â—¯â—¯')) {
            message = message.replace('â—¯â—¯', formatNumber(Math.floor(gameState.totalMeatEarned)));
        }


        const separator = 'ã€€ã€€';
        const loopedMessage = (message + separator).repeat(1);

        newsElement.textContent = loopedMessage;
    }

    updateNews();

    setInterval(updateNews, 22000);
}

        // æ–™ç†å›³é‘‘ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openRecipes() {
    const modal = document.getElementById('recipesModal');
    const grid = document.getElementById('recipeGrid');
    grid.innerHTML = '';

    recipes.forEach(recipe => {
        const item = document.createElement('div');
        const unlocked = gameState.unlockedRecipes.includes(recipe.id);
        item.className = 'recipe-item' + (unlocked ? ' unlocked' : '');

        if (!unlocked) {
            item.innerHTML = `
                <img class="recipe-img locked" src="${recipe.image}"><br>
                <strong>???</strong>
                <p>ç´¯è¨ˆ${formatNumber(recipe.requirement)}è‚‰ã§è§£æ”¾</p>
            `;
        } else {
            item.innerHTML = `
                <img class="recipe-img" src="${recipe.image}"><br>
                <strong>${recipe.name}</strong>
                <p>${recipe.description}</p>
            `;
        }

        grid.appendChild(item);
    });

    modal.classList.add('active');
}



function showRecipeCompleteModal() {
    const modal = document.getElementById('recipeCompleteModal');
    modal.classList.add('active');
}

function closeRecipeComplete() {
    document.getElementById('recipeCompleteModal').classList.remove('active');
}

function showAchievementCompleteModal() {
    document.getElementById('achievementCompleteModal').classList.add('active');
}

function closeAchievementComplete() {
    document.getElementById('achievementCompleteModal').classList.remove('active');
}

        // å®Ÿç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openAchievements() {
            const modal = document.getElementById('achievementsModal');
            const grid = document.getElementById('achievementGrid');
            grid.innerHTML = '';
            
            achievements.forEach((achievement, index) => {
                const item = document.createElement('div');
                const unlocked = gameState.achievements[index];
                item.className = 'achievement-item' + (unlocked ? ' unlocked' : '');
                
                if (unlocked) {
                    item.innerHTML = `
                        <div class="achievement-icon">${achievement.icon}</div>
                        <strong>${achievement.name}</strong>
                        <p style="font-size: 0.85rem; margin-top: 0.5rem; color: #4caf50; font-weight: bold;">âœ… é”æˆæ¸ˆã¿</p>
                        <p style="font-size: 0.8rem; margin-top: 0.3rem; opacity: 0.7;">${achievement.description}</p>
                    `;
                } else {
                    item.innerHTML = `
                        <div class="locked-icon">ğŸ”’</div>
                        <strong>???</strong>
                        <p style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.7;">æ¡ä»¶æœªé”æˆ</p>
                    `;
                }
                
                grid.appendChild(item);
            });
            
            modal.classList.add('active');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            document.querySelectorAll('.notification').forEach(n => n.remove());
            const notification = document.createElement('div');
            notification.className = 'notification';

    let type = 'default';
    if (message.startsWith('ğŸ‹')) type = 'upgrade'; // ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–
    else if (message.startsWith('ğŸ–') || message.startsWith('ğŸ’¸')) type = 'error'; // è‚‰ä¸è¶³
notification.classList.add(`toast--${type}`);


            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // æ•°å€¤ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(2) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toFixed(0);
        }
        // ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–ï¼ˆæ›ç®—ã‚¯ãƒªãƒƒã‚¯ï¼‰
function getClickValue() {
    const L = gameState.clickLevel;
    return Math.round((6 * L * L + 84 * L + 10) / 10);
}

const CLICK_COST_TABLE = [300, 600, 1200];

const CLICK_BASE_COST = 1200;
const CLICK_RATE = 1.4;

function getClickUpgradeCost(level = gameState.clickLevel) {
    if (level < CLICK_COST_TABLE.length) {
        return CLICK_COST_TABLE[level];
    }
    return Math.round(CLICK_BASE_COST * (CLICK_RATE ** (level - 2)));
}
        
function upgradeClickPower() {
    const btn = document.getElementById('clickUpgradeButton');

    if (gameState.clickLevel >= MAX_CLICK_LEVEL) {
        if (btn) {
            btn.disabled = true;
            btn.classList.add('click-upgrade-disabled');
            btn.textContent = 'ãƒ¬ãƒ™ãƒ«MAXï¼';

        }
        showNotification(`ğŸ‹ğŸ»â€â™‚ï¸ è‚‰ãƒˆãƒ¬ã¯Lv${MAX_CLICK_LEVEL}ã§ã‚«ãƒ³ã‚¹ãƒˆã ï¼`);
        return;
    }

    const cost = getClickUpgradeCost();
    if (gameState.meat < cost) {
        showNotification(`ğŸ– è‚‰ãŒè¶³ã‚Šã­ã‚§ï¼\nå¿…è¦è‚‰: ${formatNumber(cost)} `);
        return;
    }

    gameState.meat -= cost;
    gameState.clickLevel += 1;

playClickUpgradeSound();

    showNotification(`ğŸ‹ğŸ»â€â™‚ï¸ è‚‰ãƒˆãƒ¬å¼·åŒ–ï¼ Lv.${gameState.clickLevel}\n1ã‚¿ãƒƒãƒ—=+${getClickValue()}ï¼ˆæ›ç®—ï¼‰`);

    updateDisplay();
    saveGame(true);
}        
        // ã‚»ãƒ¼ãƒ–
        function saveGame(silent = false) {
            const saveData = {
                ...gameState,
                heardDialogues: Array.from(gameState.heardDialogues),
orderLog: gameState.orderLog,
                lastSave: Date.now()
            };
            localStorage.setItem('kyousukeClicker', JSON.stringify(saveData));
            
            if (!silent) {
                showNotification('ğŸ’¾ ã‚²ãƒ¼ãƒ ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
            }
        }

// =======================
// ãƒ­ãƒ¼ãƒ‰å‡¦ç†
// =======================
function loadGame() {
    const saved = localStorage.getItem('kyousukeClicker');

    if (saved) {
        const data = JSON.parse(saved);

        const restoredUpgrades = upgrades.map((u, i) => ({
            ...u,
            count: (data.upgrades && data.upgrades[i] && data.upgrades[i].count)
                ? data.upgrades[i].count
                : 0
        }));

        gameState = {
            ...data,
            upgrades: restoredUpgrades,
            heardDialogues: new Set(data.heardDialogues || []),
            unlockedUpgrades: data.unlockedUpgrades || [0],
            orderLog: data.orderLog || [], 
            };


// --- orderLog ç§»è¡Œ ---
if (Array.isArray(gameState.orderLog) && gameState.orderLog.length > 0) {
    const max = Math.max(...gameState.orderLog);

    if (max <= 7) {
        gameState.orderLog = gameState.orderLog
            .map(i => upgrades[i]?.id)
            .filter(v => typeof v === 'number');
    }
}



            gameState.rawClicks ??= 0;
            gameState.clickLevel ??= 0;
            gameState.totalClicks ??= 0;
            gameState.achievementLog ??= [];
delete gameState.clickPower;

        // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚é–“
const offlineTime = (Date.now() - data.lastSave) / 1000;

if (offlineTime > 0) {
    const offlineProduction = calculateProductionRate() * offlineTime;

    gameState.meat += offlineProduction;
    gameState.totalMeatEarned += offlineProduction;

    // æœ€å¤§æ”¾ç½®æ™‚é–“æ›´æ–°
    if (offlineTime > gameState.offlineMaxTime) {
        gameState.offlineMaxTime = offlineTime;
    }


    const hours = Math.floor(offlineTime / 3600);
    const minutes = Math.floor((offlineTime % 3600) / 60);

    showNotification(
                `ğŸ  ãŠã‹ãˆã‚Šãªã•ã„ï¼\nç•™å®ˆä¸­(${hours}æ™‚é–“${minutes}åˆ†)ã«${formatNumber(Math.floor(offlineProduction))}å€‹ã®è‚‰ã‚’æº–å‚™ã—ã¾ã—ãŸï¼`
            );
        }

    } else {
        // æ–°è¦ãƒ‡ãƒ¼ã‚¿
        gameState = {
            ...gameState,
            unlockedUpgrades: [0],
orderLog: [],
            heardDialogues: new Set()
        };
    }
}

        // ãƒªã‚»ãƒƒãƒˆ
        function resetGame() {
    const ok = confirm("æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ\nãƒ‡ãƒ¼ã‚¿ã¯å®Œå…¨ã«æ¶ˆå»ã•ã‚Œã¾ã™ã€‚");

    if (!ok) return;
    localStorage.removeItem('kyousukeClicker');
    location.reload();
}

        // å®šæœŸè‡ªå‹•ä¿å­˜
        setInterval(() => saveGame(true), 10000);

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        init();


// =======================
// æ”¯æ´è€…ã‚¯ãƒªãƒƒã‚¯
// =======================
document.getElementById('upgradesList').addEventListener('click', (e) => {
    const item = e.target.closest('.upgrade-item');
    if (!item) return;
    if (item.classList.contains('locked')) return;

    const index = parseInt(item.dataset.upgradeIndex);
    if (isNaN(index)) return;

    console.log('æ”¯æ´è€…ã‚¯ãƒªãƒƒã‚¯:', index);
    buyUpgrade(index);
});

window.addEventListener("load", () => {
    const fade = document.getElementById("fade");
    setTimeout(() => {
        fade.style.opacity = 0;
    }, 200);
});







// =======================
// éŠã³æ–¹
// =======================
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.getElementById('helpBtn');
  const modal = document.getElementById('helpModal');
  const closeBtn = document.getElementById('helpClose');

  if (!btn || !modal || !closeBtn) return;

  function openHelp() {
    modal.classList.add('active');
    modal.setAttribute('aria-hidden', 'false');
  document.body.classList.add('modal-open');
  }

  function closeHelp() {
    modal.classList.remove('active');
    modal.setAttribute('aria-hidden', 'true');
  document.body.classList.remove('modal-open');
  }

  btn.addEventListener('click', openHelp);
  closeBtn.addEventListener('click', closeHelp);

// åˆå›ã ã‘è‡ªå‹•ã§é–‹ã
const seenKey = 'helpSeen_v1';
if (!localStorage.getItem(seenKey)) {
  openHelp();
  localStorage.setItem(seenKey, '1');
}

  modal.addEventListener('click', (e) => {
    if (e.target === modal) closeHelp();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('active')) closeHelp();
  });
});



    </script>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer>
        <p>
            æœ¬ä½œã¯ã‚‚ãã‚Š(@Vz6Sc)ã«ã‚ˆã‚‹<span>éå…¬å¼ã®äºŒæ¬¡å‰µä½œãƒ•ã‚¡ãƒ³ã‚²ãƒ¼ãƒ </span>ã§ã™ã€‚<br>å€‹äººã®è¶£å‘³ã«ã‚ˆã‚Šå‰µä½œã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚Šã€å…¬å¼é–¢ä¿‚è€…æ§˜å„ä½ã¨ã¯ä¸€åˆ‡é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ <br>
            ãŠç¥ã„ã¨ãƒã‚¿ã‚’å…¼ã­ãŸå€‹äººåˆ¶ä½œã®ãŸã‚ã€
            <strong>ä¸å…·åˆã‚„æŒ™å‹•ã®è’ã•</strong>ãªã©ã‚ã£ã¦ã‚‚ç¬‘ã£ã¦è¨±ã—ã¦ãã ã•ã„ğŸ˜…<br>
            ãƒã‚°å ±å‘Šãƒ»ãƒ‡ãƒãƒƒã‚°å¯¾å¿œãªã©ã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚<br>
            (å­˜åˆ†ã«æ„›ã§ã¦ã‚ã’ã¦ãã ã•ã„ğŸ–)(ç‹‚ä»‹ï¼èª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼)<br>
 <small>ã“ã®ã‚²ãƒ¼ãƒ ã§ã¯ <a href="https://otologic.jp" target="_blank">OtoLogic</a> æ§˜ã€<a href="https://soundeffect-lab.info/">åŠ¹æœéŸ³ãƒ©ãƒœ</a>æ§˜ã®åŠ¹æœéŸ³ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</small>
        </p><br>
        <button class="footer-reset-btn" onclick="resetGame()">ğŸ”„ ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button><br>
    </footer>


<div class="help-modal" id="helpModal" aria-hidden="true">
  <div class="help-modal__content" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
    <button class="help-modal__close" id="helpClose" type="button" aria-label="é–‰ã˜ã‚‹">Ã—</button>

    <h2 class="help-title" id="helpTitle">ğŸ– ã€ç‹‚ä»‹ã‚¯ãƒªãƒƒã‚«ãƒ¼ã€ã®éŠã³æ–¹  ğŸ–</h2>

    <div class="help-body">
      <div class="help-section">
        <div class="help-head">â—† ã¾ãšã¯è‚‰</div>
        <div class="help-text">ç‹‚ä»‹ãŒè‚‰ã‚’æ¬²ã—ãŒã£ã¦ã„ã‚‹ã®ã§ã€ç‹‚ä»‹ã‚’ã‚¿ãƒƒãƒ—ã—ã¦è‚‰ã‚’ã‚ã’ã¦ãã ã•ã„ã€‚<br>
ã¨ã«ã‹ãæŠ¼ã—ã¦æŠ¼ã—ã¦æŠ¼ã—ã¾ãã‚Šã¾ã—ã‚‡ã†ã€‚
</div>
      </div>

      <div class="help-section">
        <div class="help-head">â—† æ”¯æ´è€…ã‚’å‘¼ã¶</div>
        <div class="help-text">é›†ã‚ãŸè‚‰ã§ã€æ”¯æ´è€…ã‚’å‘¼ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚<br>
æ”¯æ´ã—ã¦ãã‚Œã‚‹ä»²é–“ã‚„ãƒ¬ãƒ™ãƒ«ãŒå¢—ãˆã‚‹ã»ã©ã€ç²å¾—å‡ºæ¥ã‚‹è‚‰ã®é‡ã‚‚å¢—ãˆã¦ã„ãã¾ã™ã€‚</div>
      </div>

      <div class="help-section">
        <div class="help-head">â—† ç­‹è‚‰ã‚’é›ãˆã‚‹</div>
        <div class="help-text">é›†ã‚ãŸè‚‰ã§ã€ã€Œè‚‰ãƒˆãƒ¬ã€ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>è‚‰ãƒˆãƒ¬ã‚’ã™ã‚‹ã¨ã€1å›ã®ã‚¯ãƒªãƒƒã‚¯ãŒã©ã‚“ã©ã‚“å¼·ããªã‚Šã¾ã™ã€‚<br>
æŒ‡ã¨ç‹‚ä»‹ã€ã©ã¡ã‚‰ã‚’é›ãˆã‚‹ã‹ã¯ã‚ãªãŸæ¬¡ç¬¬ã€‚</div>
      </div>

      <div class="help-section">
        <div class="help-head">â—† æ–™ç†å›³é‘‘</div>
        <div class="help-text">ãŸãã•ã‚“è‚‰ã‚’é›†ã‚ã¦ç‹‚ä»‹ãŒé£Ÿã¹ãŸè‚‰æ–™ç†å›³é‘‘ã®å®Œæˆã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚</div>
      </div>

      <div class="help-section">
        <div class="help-head">â—† å®Ÿç¸¾</div>
        <div class="help-text">ç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã™ã¨å®Ÿç¸¾ãŒè§£æ”¾ã•ã‚Œã¾ã™ã€‚<br>
è‰²ã€…ã¨è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚å…¨éƒ¨åŸ‹ã‚ã¦ã‚‚ã”è¤’ç¾ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>
      </div>

      <div class="help-section">
        <div class="help-head">â—† ã‚»ãƒ¼ãƒ–ãƒ»ãƒªã‚»ãƒƒãƒˆ</div>
        <div class="help-text">ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚ãˆã‚‰ã„ã€‚<br>
ã¾ãŸã€ã‚µã‚¤ãƒˆä¸‹éƒ¨ã«ã‚ã‚‹ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã€ã‚’æŠ¼ã™ã¨ã€ã™ã¹ã¦æœ€åˆã‹ã‚‰ã«ãªã‚Šã¾ã™ã€‚<br></div>
      </div>
    </div>
  </div>
</div>



</body>
</html>
